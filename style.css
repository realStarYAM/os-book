/* ============================================
   OS Book - Visual Novel Styles
   ============================================ */

/* Reset & Variables */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary-color: #00d4ff;
    --secondary-color: #7c3aed;
    --accent-color: #ff6b9d;
    --bg-dark: #0a0a1a;
    --bg-card: rgba(20, 20, 40, 0.9);
    --text-primary: #ffffff;
    --text-secondary: #a0a0c0;
    --shadow-glow: 0 0 30px rgba(0, 212, 255, 0.3);
    --glass-bg: rgba(255, 255, 255, 0.05);
    --glass-border: rgba(255, 255, 255, 0.1);

    /* Transition pour les changements de thème */
    --theme-transition: background-color 0.4s ease, color 0.4s ease, border-color 0.4s ease, box-shadow 0.4s ease;
}

/* ============================================
   SYSTÈME DE THÈMES
   ============================================ */

/* Thème Default (Cyber Blue) */
[data-theme="default"] {
    --primary-color: #00d4ff;
    --secondary-color: #7c3aed;
    --accent-color: #ff6b9d;
    --bg-dark: #0a0a1a;
    --bg-card: rgba(20, 20, 40, 0.9);
    --text-primary: #ffffff;
    --text-secondary: #a0a0c0;
    --shadow-glow: 0 0 30px rgba(0, 212, 255, 0.3);
    --glass-bg: rgba(255, 255, 255, 0.05);
    --glass-border: rgba(255, 255, 255, 0.1);
}

/* Thème Dark (Pure Dark) */
[data-theme="dark"] {
    --primary-color: #8b5cf6;
    --secondary-color: #6366f1;
    --accent-color: #f472b6;
    --bg-dark: #000000;
    --bg-card: rgba(10, 10, 10, 0.95);
    --text-primary: #e0e0e0;
    --text-secondary: #707070;
    --shadow-glow: 0 0 20px rgba(139, 92, 246, 0.2);
    --glass-bg: rgba(30, 30, 30, 0.8);
    --glass-border: rgba(60, 60, 60, 0.3);
}

/* Thème Cyber / Neon */
[data-theme="cyber"] {
    --primary-color: #ff00ff;
    --secondary-color: #00ffff;
    --accent-color: #ff0080;
    --bg-dark: #0d001a;
    --bg-card: rgba(20, 0, 40, 0.95);
    --text-primary: #ffffff;
    --text-secondary: #cc99ff;
    --shadow-glow: 0 0 40px rgba(255, 0, 255, 0.5);
    --glass-bg: rgba(100, 0, 150, 0.15);
    --glass-border: rgba(255, 0, 255, 0.3);
}

/* Thème Horror / Glitch */
[data-theme="horror"] {
    --primary-color: #ff0000;
    --secondary-color: #8b0000;
    --accent-color: #ff4444;
    --bg-dark: #0a0000;
    --bg-card: rgba(20, 0, 0, 0.95);
    --text-primary: #ffcccc;
    --text-secondary: #aa6666;
    --shadow-glow: 0 0 30px rgba(255, 0, 0, 0.4);
    --glass-bg: rgba(50, 0, 0, 0.3);
    --glass-border: rgba(255, 0, 0, 0.2);
}

/* Thème Terminal / Linux */
[data-theme="terminal"] {
    --primary-color: #00ff00;
    --secondary-color: #00cc00;
    --accent-color: #ffff00;
    --bg-dark: #000000;
    --bg-card: rgba(0, 20, 0, 0.95);
    --text-primary: #00ff00;
    --text-secondary: #008800;
    --shadow-glow: 0 0 20px rgba(0, 255, 0, 0.3);
    --glass-bg: rgba(0, 30, 0, 0.5);
    --glass-border: rgba(0, 255, 0, 0.2);
}

/* Thème Glass / Futuriste */
[data-theme="glass"] {
    --primary-color: #60a5fa;
    --secondary-color: #a78bfa;
    --accent-color: #f0abfc;
    --bg-dark: #1e293b;
    --bg-card: rgba(30, 41, 59, 0.7);
    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --shadow-glow: 0 0 30px rgba(96, 165, 250, 0.2);
    --glass-bg: rgba(255, 255, 255, 0.08);
    --glass-border: rgba(255, 255, 255, 0.15);
}

/* Transition globale pour changement de thème */
body,
.screen,
.menu-panel,
.dialogue-box,
.media-player,
.intro-screen,
.chapter-modal-content {
    transition: var(--theme-transition);
}

html,
body {
    height: 100%;
    overflow: hidden;
    font-family: 'Inter', sans-serif;
    background: var(--bg-dark);
    color: var(--text-primary);
}

/* Accessible utility */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
    color: var(--text-primary);
}

/* Screens */
.screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 50%, #0a0a1a 100%);
}

.screen.active {
    display: flex;
}

/* ============================================
   Start Screen
   ============================================ */
#start-screen {
    background:
        radial-gradient(ellipse at center, rgba(0, 212, 255, 0.1) 0%, transparent 60%),
        linear-gradient(180deg, #0a0a1a 0%, #151530 100%);
}

/* Conteneur des boutons du menu - Layout stable */
.menu-actions {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    width: 100%;
    max-width: 400px;
    height: auto;
    margin-top: 1rem;
    /* Z-index élevé pour rester au-dessus des personnages */
    position: relative;
    z-index: 10;
    /* Animations autorisées : opacity + translateY uniquement */
    animation: fadeInUp 0.8s ease-out 0.3s backwards;
}

/* Personnages décoratifs du menu - en arrière-plan */
.menu-characters {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    padding: 2rem;
}

.menu-char {
    max-width: 180px;
    max-height: 35vh;
    width: auto;
    height: auto;
    object-fit: contain;
    filter: drop-shadow(0 0 20px rgba(0, 212, 255, 0.3));
    opacity: 0.6;
    transition: opacity 0.3s ease;
}

.menu-char.left {
    align-self: flex-end;
}

.menu-char.center {
    /* Masqué par défaut - le logo central interfère avec les boutons */
    /* Peut être activé via JS si nécessaire */
    display: none !important;
}

.menu-char.right {
    align-self: flex-end;
}

.title-container {
    text-align: center;
    animation: fadeInUp 1s ease-out;
}

.main-title {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(3rem, 10vw, 6rem);
    font-weight: 900;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color), var(--accent-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 0 50px rgba(0, 212, 255, 0.5);
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
}

.subtitle {
    font-size: clamp(1rem, 3vw, 1.5rem);
    color: var(--text-secondary);
    letter-spacing: 0.2em;
    text-transform: uppercase;
    margin-bottom: 3rem;
}

.title-logo {
    margin: 2rem 0 3rem;
}

.floating-logo {
    width: clamp(120px, 20vw, 200px);
    height: auto;
    filter: drop-shadow(0 0 30px rgba(0, 212, 255, 0.5));
    animation: float 3s ease-in-out infinite;
}

/* Glow Button */
.glow-button {
    position: relative;
    padding: 1.2rem 3rem;
    font-family: 'Orbitron', sans-serif;
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-primary);
    background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
    border: none;
    border-radius: 50px;
    cursor: pointer;
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow:
        0 0 20px rgba(124, 58, 237, 0.4),
        inset 0 0 20px rgba(255, 255, 255, 0.1);
}

.glow-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s ease;
}

.glow-button:hover {
    transform: scale(1.05);
    box-shadow:
        0 0 40px rgba(0, 212, 255, 0.6),
        inset 0 0 20px rgba(255, 255, 255, 0.2);
}

.glow-button:hover::before {
    left: 100%;
}

/* Bouton Choisir un chapitre */
.chapter-select-btn {
    padding: 0.8rem 2rem;
    font-family: 'Orbitron', sans-serif;
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-secondary);
    background: transparent;
    border: 2px solid var(--glass-border);
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.chapter-select-btn:hover {
    color: var(--text-primary);
    border-color: var(--primary-color);
    background: rgba(0, 212, 255, 0.1);
    box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
}

.whatif-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.7rem;
}

.whatif-count {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 28px;
    height: 28px;
    padding: 0 0.4rem;
    border-radius: 999px;
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--text-primary);
    background: linear-gradient(135deg, rgba(26, 95, 122, 0.9), rgba(74, 18, 93, 0.9));
    border: 1px solid rgba(255, 255, 255, 0.15);
    box-shadow: 0 0 15px rgba(0, 212, 255, 0.2);
}

/* ============================================
   Modale de sélection de chapitres
   ============================================ */

.chapter-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.chapter-modal.open {
    opacity: 1;
    visibility: visible;
}

.chapter-modal-backdrop {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(8px);
}

.chapter-modal-content {
    position: relative;
    z-index: 1;
    width: 90%;
    max-width: 500px;
    max-height: 80vh;
    padding: 2rem;
    background: rgba(20, 20, 50, 0.98);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    box-shadow:
        0 25px 60px rgba(0, 0, 0, 0.6),
        0 0 40px rgba(0, 212, 255, 0.1);
    transform: scale(0.9) translateY(20px);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
}

/* ============================================
   Modale What if
   ============================================ */
.whatif-modal {
    position: fixed;
    inset: 0;
    z-index: 1200;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.whatif-modal.open {
    opacity: 1;
    visibility: visible;
}

.whatif-modal-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.82);
    backdrop-filter: blur(10px);
}

.whatif-modal-content {
    position: relative;
    z-index: 1;
    width: min(900px, 92vw);
    max-height: 85vh;
    padding: 2.2rem;
    background: linear-gradient(140deg, rgba(18, 28, 54, 0.97), rgba(10, 12, 32, 0.98));
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 24px;
    box-shadow:
        0 25px 60px rgba(0, 0, 0, 0.6),
        0 0 40px rgba(0, 212, 255, 0.15);
    transform: translateY(20px) scale(0.96);
    transition: transform 0.3s ease;
    overflow: hidden;
}

.whatif-modal.open .whatif-modal-content {
    transform: translateY(0) scale(1);
}

.whatif-modal-close {
    position: absolute;
    top: 16px;
    right: 16px;
    width: 38px;
    height: 38px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-secondary);
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.whatif-modal-close:hover {
    background: rgba(255, 71, 87, 0.3);
    color: #ff4757;
}

.whatif-modal-title {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(1.4rem, 3vw, 2rem);
    text-align: center;
    margin-bottom: 0.4rem;
    background: linear-gradient(135deg, #60a5fa, #f59e0b, #f472b6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.whatif-modal-subtitle {
    text-align: center;
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-bottom: 1.6rem;
}

.whatif-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 1rem;
    max-height: 50vh;
    overflow-y: auto;
    padding-right: 0.4rem;
}

.whatif-card {
    position: relative;
    padding: 1.2rem;
    border-radius: 16px;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.08);
    transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
}

.whatif-card:hover {
    transform: translateY(-2px);
    border-color: rgba(96, 165, 250, 0.5);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
}

.whatif-card.active {
    border-color: rgba(250, 204, 21, 0.6);
    box-shadow: 0 0 24px rgba(250, 204, 21, 0.25);
}

.whatif-card-header {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    margin-bottom: 0.6rem;
}

.whatif-icon {
    font-size: 1.4rem;
}

.whatif-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 1rem;
    color: var(--text-primary);
}

.whatif-description {
    font-size: 0.85rem;
    line-height: 1.5;
    color: var(--text-secondary);
    margin-bottom: 1rem;
}

.whatif-toggle {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.8rem;
    font-size: 0.85rem;
    color: var(--text-primary);
}

.whatif-switch {
    position: relative;
    width: 46px;
    height: 24px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.12);
    border: 1px solid rgba(255, 255, 255, 0.2);
    cursor: pointer;
    transition: background 0.2s ease, border-color 0.2s ease;
}

.whatif-switch::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: linear-gradient(135deg, #60a5fa, #f472b6);
    transition: transform 0.2s ease;
    box-shadow: 0 0 10px rgba(96, 165, 250, 0.5);
}

.whatif-switch[aria-checked="true"] {
    background: rgba(250, 204, 21, 0.25);
    border-color: rgba(250, 204, 21, 0.6);
}

.whatif-switch[aria-checked="true"]::after {
    transform: translateX(22px);
}

.whatif-actions {
    margin-top: 1.8rem;
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    justify-content: flex-end;
}

.whatif-reset-btn {
    margin-top: 0;
    border-color: rgba(255, 255, 255, 0.2);
}

.whatif-apply-btn {
    padding: 0.9rem 2.4rem;
    font-size: 1rem;
}

.whatif-branch-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.25rem 0.6rem;
    border-radius: 999px;
    font-size: 0.7rem;
    background: rgba(255, 255, 255, 0.08);
    color: var(--text-secondary);
}

@media (max-width: 720px) {
    .whatif-modal-content {
        padding: 1.6rem 1.2rem;
        border-radius: 18px;
    }

    .whatif-actions {
        justify-content: center;
    }
}

.chapter-modal.open .chapter-modal-content {
    transform: scale(1) translateY(0);
}

.chapter-modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 36px;
    height: 36px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-secondary);
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.chapter-modal-close:hover {
    background: rgba(255, 71, 87, 0.3);
    color: #ff4757;
}

.chapter-modal-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.5rem;
    text-align: center;
    margin-bottom: 0.5rem;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.chapter-modal-subtitle {
    text-align: center;
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: 1.5rem;
}

.chapter-list {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
}

.chapter-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.2rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.chapter-item:hover:not(.locked) {
    background: rgba(0, 212, 255, 0.1);
    border-color: var(--primary-color);
    transform: translateX(5px);
}

.chapter-item.locked {
    opacity: 0.5;
    cursor: not-allowed;
}

.chapter-item.locked:hover {
    background: rgba(255, 255, 255, 0.05);
}

.chapter-icon {
    font-size: 1.5rem;
    min-width: 2rem;
    text-align: center;
}

.chapter-info {
    flex: 1;
}

.chapter-name {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.95rem;
    color: var(--text-primary);
    margin-bottom: 0.2rem;
}

.chapter-item.locked .chapter-name {
    color: var(--text-secondary);
}

.chapter-desc {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.chapter-lock {
    font-size: 1.2rem;
    color: var(--text-secondary);
}

/* Animation shake pour chapitres verrouillés */
.chapter-item.shake-locked {
    animation: shakeLockedItem 0.5s ease;
}

@keyframes shakeLockedItem {

    0%,
    100% {
        transform: translateX(0);
    }

    20% {
        transform: translateX(-8px);
    }

    40% {
        transform: translateX(8px);
    }

    60% {
        transform: translateX(-5px);
    }

    80% {
        transform: translateX(5px);
    }
}

/* Toast notification pour chapitres verrouillés */
.chapter-toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    padding: 1rem 2rem;
    background: rgba(30, 30, 60, 0.95);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 71, 87, 0.4);
    border-radius: 12px;
    color: var(--text-primary);
    font-size: 0.95rem;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

.chapter-toast.visible {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
}

/* ============================================
   VN Scene
   ============================================ */
#vn-scene {
    position: relative;
    background:
        radial-gradient(ellipse at top, rgba(124, 58, 237, 0.15) 0%, transparent 50%),
        linear-gradient(180deg, #0a0a1a 0%, #10102a 100%);
}

/* Particles Background */
.particles-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image:
        radial-gradient(2px 2px at 20px 30px, rgba(255, 255, 255, 0.3), transparent),
        radial-gradient(2px 2px at 40px 70px, rgba(0, 212, 255, 0.3), transparent),
        radial-gradient(2px 2px at 50px 160px, rgba(124, 58, 237, 0.3), transparent),
        radial-gradient(2px 2px at 90px 40px, rgba(255, 255, 255, 0.3), transparent),
        radial-gradient(2px 2px at 130px 80px, rgba(0, 212, 255, 0.3), transparent),
        radial-gradient(2px 2px at 160px 120px, rgba(255, 107, 157, 0.3), transparent);
    background-size: 200px 200px;
    animation: particleFloat 20s linear infinite;
    pointer-events: none;
}

/* Characters Container */
.characters-container {
    position: absolute;
    top: 5%;
    left: 0;
    width: 100%;
    height: 55%;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    padding: 0 5%;
    z-index: 10;
}

.character-slot {
    display: flex;
    flex-direction: column;
    align-items: center;
    opacity: 0;
    transform: translateY(50px);
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.character-slot.visible {
    opacity: 1;
    transform: translateY(0);
}

.character-slot.speaking {
    transform: scale(1.1) translateY(-10px);
    filter: drop-shadow(0 0 30px rgba(0, 212, 255, 0.8));
}

.character-slot.left {
    transform-origin: bottom left;
}

.character-slot.right {
    transform-origin: bottom right;
}

.character-slot.center {
    position: absolute;
    left: 50%;
    transform: translateX(-50%) translateY(50px);
}

.character-slot.center.visible {
    transform: translateX(-50%) translateY(0);
}

.character-slot.center.speaking {
    transform: translateX(-50%) scale(1.1) translateY(-10px);
}

.character-sprite {
    width: clamp(100px, 18vw, 220px);
    height: auto;
    filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.5));
    transition: all 0.3s ease;
}

.character-fallback {
    display: none;
    align-items: center;
    justify-content: center;
    width: clamp(100px, 18vw, 220px);
    height: clamp(100px, 18vw, 220px);
    border-radius: 18px;
    background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.08), rgba(10, 10, 26, 0.8));
    border: 1px dashed rgba(255, 255, 255, 0.18);
    color: var(--primary-color);
    font-size: 0.75rem;
    font-family: 'Orbitron', sans-serif;
    text-align: center;
    padding: 0.5rem;
    text-shadow: 0 0 10px rgba(0, 212, 255, 0.4);
}

.character-slot.image-missing .character-sprite {
    display: none;
}

.character-slot.image-missing .character-fallback {
    display: flex;
}

.character-name-tag {
    margin-top: 1rem;
    padding: 0.5rem 1.5rem;
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: 20px;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.9rem;
    color: var(--primary-color);
    text-shadow: 0 0 10px var(--primary-color);
}

/* Dieu/Kernel */
.character-slot.kernel {
    position: relative;
}

.character-slot.kernel::before {
    content: '';
    position: absolute;
    bottom: 20%;
    width: clamp(140px, 22vw, 260px);
    height: clamp(140px, 22vw, 260px);
    border-radius: 50%;
    background:
        radial-gradient(circle at 50% 50%, rgba(246, 211, 101, 0.35) 0%, rgba(111, 214, 255, 0.2) 45%, rgba(10, 10, 26, 0) 70%),
        repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.06) 0 2px, rgba(255, 255, 255, 0) 2px 8px);
    filter: blur(2px);
    z-index: 0;
    animation: kernelPulse 8s ease-in-out infinite;
}

.character-slot.kernel .character-sprite {
    position: relative;
    z-index: 1;
    filter: drop-shadow(0 0 25px rgba(246, 211, 101, 0.35)) drop-shadow(0 0 45px rgba(111, 214, 255, 0.3));
}

.character-slot.kernel .character-name-tag {
    border-color: rgba(246, 211, 101, 0.4);
    color: #f6d365;
    text-shadow: 0 0 12px rgba(246, 211, 101, 0.6);
}

/* Emotion Effects */
.character-slot.shake {
    animation: shake 0.5s ease-in-out infinite;
}

.character-slot.fear {
    animation: fear 0.3s ease-in-out infinite;
}

.character-slot.dying {
    animation: dying 3s ease-out forwards;
}

.character-slot.sad {
    filter: grayscale(50%) brightness(0.8);
}

.character-slot.happy {
    animation: bounce 0.6s ease infinite;
}

.character-slot.angry {
    filter: saturate(1.5) brightness(1.1);
    animation: angryShake 0.1s ease infinite;
}

/* Dialogue Container */
.dialogue-container {
    position: absolute;
    bottom: 5%;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 900px;
    z-index: 20;
}

.speaker-name {
    display: inline-block;
    padding: 0.6rem 2rem;
    margin-bottom: -1px;
    background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
    border-radius: 15px 15px 0 0;
    font-family: 'Orbitron', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    color: white;
    box-shadow: 0 -5px 20px rgba(0, 212, 255, 0.3);
}

.dialogue-box {
    padding: 2rem;
    background: var(--bg-card);
    backdrop-filter: blur(20px);
    border: 2px solid var(--glass-border);
    border-radius: 0 20px 20px 20px;
    box-shadow:
        0 10px 40px rgba(0, 0, 0, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    min-height: 120px;
}

#dialogue-text {
    font-size: clamp(1rem, 2.5vw, 1.3rem);
    line-height: 1.8;
    color: var(--text-primary);
}

.dialogue-controls {
    text-align: right;
    margin-top: 0.5rem;
}

.continue-indicator {
    font-size: 0.9rem;
    color: var(--text-secondary);
    animation: pulse 1.5s ease-in-out infinite;
}

/* Progress Bar */
.progress-bar {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: rgba(255, 255, 255, 0.1);
}

.progress-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
    transition: width 0.5s ease;
    box-shadow: 0 0 15px var(--primary-color);
}

/* ============================================
   Menu Pause In-Game
   ============================================ */

/* Bouton Menu (hamburger) en haut à gauche */
.menu-btn {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 100;
    width: 50px;
    height: 50px;
    border: none;
    border-radius: 12px;
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    color: var(--text-primary);
    font-size: 1.8rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.menu-btn:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(0, 212, 255, 0.3);
}

.menu-btn:active {
    transform: scale(0.95);
}

/* Backdrop sombre */
.menu-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    z-index: 150;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.vn-menu.open .menu-backdrop {
    opacity: 1;
    visibility: visible;
}

/* Panel du menu (glassmorphism) avec animation spring */
.menu-panel {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.8) translateY(20px);
    z-index: 200;
    min-width: 340px;
    max-width: 90vw;
    padding: 2rem;
    background: rgba(20, 20, 50, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 24px;
    box-shadow:
        0 25px 60px rgba(0, 0, 0, 0.6),
        0 0 40px rgba(0, 212, 255, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
    opacity: 0;
    visibility: hidden;
    transition:
        opacity 0.35s ease,
        visibility 0.35s ease,
        transform 0.45s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.vn-menu.open .menu-panel {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, -50%) scale(1) translateY(0);
}

/* Animation de fermeture plus rapide */
.vn-menu:not(.open) .menu-panel {
    transition:
        opacity 0.25s ease,
        visibility 0.25s ease,
        transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.menu-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.6rem;
    text-align: center;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.menu-buttons {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
}

/* Animation staggered des boutons */
.vn-menu.open .menu-action-btn {
    animation: menuButtonAppear 0.4s ease forwards;
}

.vn-menu.open .menu-action-btn:nth-child(1) {
    animation-delay: 0.05s;
}

.vn-menu.open .menu-action-btn:nth-child(2) {
    animation-delay: 0.1s;
}

.vn-menu.open .menu-action-btn:nth-child(3) {
    animation-delay: 0.15s;
}

.vn-menu.open .menu-speed-control {
    animation: menuButtonAppear 0.4s ease 0.2s forwards;
    opacity: 0;
}

.vn-menu.open .menu-action-btn:nth-child(5) {
    animation-delay: 0.25s;
}

.vn-menu.open .menu-action-btn:nth-child(6) {
    animation-delay: 0.3s;
}

@keyframes menuButtonAppear {
    from {
        opacity: 0;
        transform: translateX(-15px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.menu-action-btn {
    width: 100%;
    padding: 1rem 1.5rem;
    font-family: 'Inter', sans-serif;
    font-size: 1rem;
    font-weight: 500;
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 14px;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    text-align: left;
    opacity: 0;
}

.menu-action-btn:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: var(--primary-color);
    transform: translateX(8px) scale(1.02);
    box-shadow: 0 4px 15px rgba(0, 212, 255, 0.2);
}

.menu-action-btn:active {
    transform: translateX(4px) scale(0.98);
    transition-duration: 0.1s;
}

.menu-action-btn:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
    background: rgba(0, 212, 255, 0.1);
}

.menu-action-btn.warning {
    color: #ffc107;
}

.menu-action-btn.warning:hover {
    background: rgba(255, 193, 7, 0.15);
    border-color: #ffc107;
    box-shadow: 0 4px 15px rgba(255, 193, 7, 0.2);
}

.menu-action-btn.danger {
    color: #ff4757;
}

.menu-action-btn.danger:hover {
    background: rgba(255, 71, 87, 0.15);
    border-color: #ff4757;
    box-shadow: 0 4px 15px rgba(255, 71, 87, 0.2);
}

.menu-divider {
    border: none;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
    margin: 0.8rem 0;
}

/* Contrôle de vitesse du texte */
.menu-speed-control {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 0.8rem 1rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.08);
}

.menu-speed-control label {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.menu-speed-control input[type="range"] {
    width: 100%;
    height: 6px;
    -webkit-appearance: none;
    appearance: none;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    outline: none;
    cursor: pointer;
}

.menu-speed-control input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    background: var(--primary-color);
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.menu-speed-control input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.2);
}

.menu-speed-control input[type="range"]::-moz-range-thumb {
    width: 18px;
    height: 18px;
    background: var(--primary-color);
    border-radius: 50%;
    border: none;
    cursor: pointer;
}

#speed-label {
    font-size: 0.85rem;
    color: var(--primary-color);
    text-align: center;
    font-weight: 600;
}

/* Cacher le panneau et backdrop par défaut, mais pas le bouton */
.vn-menu {
    /* Conteneur pour le système de menu */
}

/* ============================================
   End Screen
   ============================================ */
#end-screen {
    background:
        radial-gradient(ellipse at center, rgba(255, 107, 157, 0.1) 0%, transparent 60%),
        linear-gradient(180deg, #0a0a1a 0%, #151530 100%);
}

.end-content {
    text-align: center;
    animation: fadeInUp 1s ease-out;
}

.end-title {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(4rem, 15vw, 8rem);
    font-weight: 900;
    background: linear-gradient(135deg, var(--accent-color), var(--secondary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 2rem;
}

.end-message {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    color: var(--text-primary);
    margin-bottom: 1rem;
}

.end-subtitle {
    font-size: 1.2rem;
    color: var(--text-secondary);
    font-style: italic;
    margin-bottom: 3rem;
}

/* ============================================
   Animations
   ============================================ */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes float {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-20px);
    }
}

@keyframes pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }
}

@keyframes kernelPulse {

    0%,
    100% {
        transform: scale(1);
        opacity: 0.9;
    }

    50% {
        transform: scale(1.05);
        opacity: 0.75;
    }
}

@keyframes shake {

    0%,
    100% {
        transform: translateX(0);
    }

    25% {
        transform: translateX(-5px);
    }

    75% {
        transform: translateX(5px);
    }
}

@keyframes fear {

    0%,
    100% {
        transform: translateX(0) scale(0.98);
    }

    25% {
        transform: translateX(-3px) scale(1);
    }

    75% {
        transform: translateX(3px) scale(1);
    }
}

@keyframes dying {
    0% {
        opacity: 1;
        filter: grayscale(0) brightness(1);
        transform: translateY(0);
    }

    50% {
        opacity: 0.5;
        filter: grayscale(100%) brightness(0.5);
    }

    100% {
        opacity: 0;
        filter: grayscale(100%) brightness(0);
        transform: translateY(30px);
    }
}

@keyframes bounce {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-10px);
    }
}

@keyframes angryShake {

    0%,
    100% {
        transform: translateX(0);
    }

    50% {
        transform: translateX(2px);
    }
}

/* XP Dramatic Appearance Effect */
.character-slot.xp-appear {
    animation: xpAppear 1.5s ease-out forwards;
}

@keyframes xpAppear {
    0% {
        opacity: 0;
        transform: translateX(-50%) scale(0.3);
        filter: brightness(3) saturate(0);
    }

    30% {
        opacity: 1;
        transform: translateX(-50%) scale(1.3);
        filter: brightness(2) saturate(1.5);
    }

    50% {
        transform: translateX(-50%) scale(1.1);
        filter: brightness(1.5) saturate(1.2);
    }

    100% {
        opacity: 1;
        transform: translateX(-50%) scale(1);
        filter: brightness(1) saturate(1);
    }
}

/* ============================================
   Act 2 - Emotional Scene Animations
   ============================================ */

/* Fade Out Goodbye - 98 and ME disappear */
.character-slot.fade-out-goodbye {
    animation: fadeOutGoodbye 3s ease-out forwards;
}

@keyframes fadeOutGoodbye {
    0% {
        opacity: 1;
        filter: grayscale(0) brightness(1);
        transform: translateY(0);
    }

    50% {
        opacity: 0.5;
        filter: grayscale(50%) brightness(0.8);
    }

    100% {
        opacity: 0;
        filter: grayscale(100%) brightness(0.5);
        transform: translateY(-30px);
    }
}

/* Crying - XP trembling with tears */
.character-slot.crying {
    animation: cryingTremble 0.15s ease-in-out infinite;
    filter: saturate(0.7) brightness(0.9);
}

@keyframes cryingTremble {

    0%,
    100% {
        transform: translateX(0) translateY(0);
    }

    25% {
        transform: translateX(-2px) translateY(1px);
    }

    50% {
        transform: translateX(2px) translateY(-1px);
    }

    75% {
        transform: translateX(-1px) translateY(2px);
    }
}

/* Hug Animation - Windows 2000 moves toward XP */
.character-slot.hug-animation {
    animation: moveToHug 1s ease-out forwards;
}

@keyframes moveToHug {
    0% {
        transform: translateX(0);
    }

    100% {
        transform: translateX(50px);
    }
}

/* Hugging State - Characters close together */
.character-slot.hugging-left {
    transform: translateX(60px) scale(1.05);
    filter: brightness(1.1);
}

.character-slot.hugging-right {
    transform: translateX(-60px) scale(1.05);
    filter: brightness(1.1);
}

/* Subtle glow effect when hugging */
.character-slot.hugging-left .character-sprite,
.character-slot.hugging-right .character-sprite {
    filter: drop-shadow(0 0 15px rgba(255, 200, 100, 0.4));
}

/* ============================================
   Act 3 - Death Effect (R.I.P. Animation)
   ============================================ */

/* Death Effect - Character becomes grey/transparent */
.character-slot.death-effect {
    animation: deathRIP 2s ease-out forwards;
}

@keyframes deathRIP {
    0% {
        opacity: 1;
        filter: grayscale(0) brightness(1);
    }

    50% {
        opacity: 0.7;
        filter: grayscale(70%) brightness(0.7);
    }

    100% {
        opacity: 0.4;
        filter: grayscale(100%) brightness(0.5);
    }
}

/* Fast Death Effect - Quick disappearance (Windows 8) */
.character-slot.fast-death-effect {
    animation: fastDeathRIP 1s ease-out forwards;
}

@keyframes fastDeathRIP {
    0% {
        opacity: 1;
        filter: grayscale(0) brightness(1);
        transform: scale(1);
    }

    50% {
        opacity: 0.5;
        filter: grayscale(80%) brightness(0.6);
        transform: scale(0.95);
    }

    100% {
        opacity: 0;
        filter: grayscale(100%) brightness(0);
        transform: scale(0.8) translateY(30px);
    }
}

/* Ubuntu Dramatic Appearance Effect */
.character-slot.ubuntu-appear {
    animation: ubuntuAppear 1.5s ease-out forwards;
}

@keyframes ubuntuAppear {
    0% {
        opacity: 0;
        transform: translateX(100px) scale(0.5);
        filter: brightness(0) saturate(0);
    }

    30% {
        opacity: 0.5;
        transform: translateX(20px) scale(0.9);
        filter: brightness(0.5) saturate(0.5);
    }

    60% {
        opacity: 1;
        transform: translateX(0) scale(1.1);
        filter: brightness(1.2) saturate(1.2);
    }

    100% {
        opacity: 1;
        transform: translateX(0) scale(1);
        filter: brightness(1) saturate(1);
    }
}

/* Bow Head Effect - Characters lower their heads in mourning */
.character-slot.bow-head {
    animation: bowHead 1.5s ease-out forwards;
}

@keyframes bowHead {
    0% {
        transform: translateY(0) rotate(0deg);
        filter: brightness(1);
    }

    100% {
        transform: translateY(20px) rotate(-10deg);
        filter: brightness(0.6) grayscale(30%);
    }
}

/* ============================================
   Act 10 - Windows 12 Flash Appearance
   ============================================ */

/* Windows 12 Dramatic Flash Appearance */
.character-slot.windows12-appear {
    animation: windows12Flash 1s ease-out forwards;
}

@keyframes windows12Flash {
    0% {
        opacity: 0;
        transform: translateX(-50%) scale(3);
        filter: brightness(5) saturate(0);
    }

    20% {
        opacity: 1;
        transform: translateX(-50%) scale(1.5);
        filter: brightness(3) saturate(0.5);
    }

    50% {
        transform: translateX(-50%) scale(1.2);
        filter: brightness(1.5) saturate(1);
    }

    70% {
        transform: translateX(-50%) scale(0.95);
        filter: brightness(1.2) saturate(1.2);
    }

    100% {
        opacity: 1;
        transform: translateX(-50%) scale(1);
        filter: brightness(1) saturate(1);
    }
}

/* Screen flash effect for Windows 12 appearance */
.screen.flash-effect::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: white;
    animation: screenFlash 0.5s ease-out forwards;
    pointer-events: none;
    z-index: 1000;
}

@keyframes screenFlash {
    0% {
        opacity: 1;
    }

    100% {
        opacity: 0;
    }
}

/* ============================================
   VILLAIN - ChromeOS Antagoniste
   ============================================ */

/* Style Villain pour ChromeOS */
.character-slot.villain {
    filter: drop-shadow(0 0 20px rgba(255, 45, 85, 0.8)) drop-shadow(0 0 40px rgba(0, 212, 255, 0.4));
    animation: villainPulse 2s ease-in-out infinite;
}

.character-slot.villain .character-sprite {
    filter: drop-shadow(0 0 15px rgba(255, 45, 85, 0.7)) drop-shadow(0 0 30px rgba(138, 43, 226, 0.5));
}

.character-slot.villain .character-name-tag {
    background: linear-gradient(135deg, rgba(255, 45, 85, 0.3), rgba(138, 43, 226, 0.3));
    border-color: rgba(255, 45, 85, 0.6);
    color: #ff2d55;
    text-shadow: 0 0 10px rgba(255, 45, 85, 0.8);
}

/* Animation de pulsation menaçante */
@keyframes villainPulse {

    0%,
    100% {
        filter: drop-shadow(0 0 20px rgba(255, 45, 85, 0.8)) drop-shadow(0 0 40px rgba(0, 212, 255, 0.4));
        transform: scale(1);
    }

    50% {
        filter: drop-shadow(0 0 35px rgba(255, 45, 85, 1)) drop-shadow(0 0 60px rgba(138, 43, 226, 0.6));
        transform: scale(1.02);
    }
}

/* Apparition dramatique de ChromeOS */
.character-slot.chromeos-appear {
    animation: chromeosAppear 1.5s ease-out forwards;
}

@keyframes chromeosAppear {
    0% {
        opacity: 0;
        transform: translateX(-50%) scale(0.5);
        filter: brightness(0) saturate(0);
    }

    20% {
        opacity: 0.3;
        filter: brightness(0.3) saturate(0) hue-rotate(180deg);
    }

    40% {
        opacity: 0.7;
        transform: translateX(-50%) scale(1.3);
        filter: brightness(2) saturate(1.5) hue-rotate(0deg);
    }

    60% {
        transform: translateX(-50%) scale(0.9);
        filter: drop-shadow(0 0 30px rgba(255, 45, 85, 1));
    }

    100% {
        opacity: 1;
        transform: translateX(-50%) scale(1);
        filter: drop-shadow(0 0 20px rgba(255, 45, 85, 0.8));
    }
}

/* Transition sombre pour l'arrivée du villain */
.transition-overlay.villain-transition {
    background: linear-gradient(135deg, #1a0a1a 0%, #0a0a1a 50%, #1a0a20 100%) !important;
}

.transition-overlay.villain-transition .transition-text {
    color: #ff2d55;
    text-shadow: 0 0 30px rgba(255, 45, 85, 0.8),
        0 0 60px rgba(138, 43, 226, 0.5);
}

/* Shake léger menaçant */
.character-slot.villain-shake {
    animation: villainShake 0.1s ease-in-out infinite;
}

@keyframes villainShake {

    0%,
    100% {
        transform: translateX(0) translateY(0);
    }

    25% {
        transform: translateX(-2px) translateY(1px);
    }

    75% {
        transform: translateX(2px) translateY(-1px);
    }
}

/* ============================================
   WINDOWS 11 SSJ - Super Saiyan Mode
   ============================================ */

/* Style SSJ pour Windows 11 - Aura divine */
.character-slot.ssj {
    filter: drop-shadow(0 0 30px rgba(0, 191, 255, 1)) drop-shadow(0 0 60px rgba(138, 43, 226, 0.8)) drop-shadow(0 0 90px rgba(255, 255, 255, 0.5));
    animation: ssjPulse 1.5s ease-in-out infinite;
}

.character-slot.ssj .character-sprite {
    filter: drop-shadow(0 0 25px rgba(0, 191, 255, 1)) drop-shadow(0 0 50px rgba(255, 255, 255, 0.8)) brightness(1.3);
}

.character-slot.ssj .character-name-tag {
    background: linear-gradient(135deg, rgba(0, 191, 255, 0.4), rgba(138, 43, 226, 0.4));
    border-color: rgba(0, 191, 255, 0.8);
    color: #00bfff;
    text-shadow: 0 0 15px rgba(0, 191, 255, 1),
        0 0 30px rgba(255, 255, 255, 0.6);
}

/* Pulsation de puissance maîtrisée */
@keyframes ssjPulse {

    0%,
    100% {
        filter: drop-shadow(0 0 30px rgba(0, 191, 255, 1)) drop-shadow(0 0 60px rgba(138, 43, 226, 0.8)) drop-shadow(0 0 90px rgba(255, 255, 255, 0.5));
        transform: scale(1);
    }

    50% {
        filter: drop-shadow(0 0 50px rgba(0, 191, 255, 1)) drop-shadow(0 0 80px rgba(138, 43, 226, 1)) drop-shadow(0 0 120px rgba(255, 255, 255, 0.8));
        transform: scale(1.03);
    }
}

/* SSJ Calme - Puissance apaisée après la victoire */
.character-slot.ssj-calm {
    filter: drop-shadow(0 0 20px rgba(0, 191, 255, 0.6)) drop-shadow(0 0 40px rgba(100, 149, 237, 0.4));
    animation: ssjCalmPulse 3s ease-in-out infinite;
}

@keyframes ssjCalmPulse {

    0%,
    100% {
        filter: drop-shadow(0 0 20px rgba(0, 191, 255, 0.6)) drop-shadow(0 0 40px rgba(100, 149, 237, 0.4));
    }

    50% {
        filter: drop-shadow(0 0 30px rgba(0, 191, 255, 0.8)) drop-shadow(0 0 50px rgba(100, 149, 237, 0.6));
    }
}

/* Transition dorée pour l'éveil SSJ */
.transition-overlay.ssj-transition {
    background: linear-gradient(135deg, #0a0a2a 0%, #000020 50%, #0a0a30 100%) !important;
}

.transition-overlay.ssj-transition .transition-text {
    color: #00bfff;
    text-shadow: 0 0 30px rgba(0, 191, 255, 1),
        0 0 60px rgba(138, 43, 226, 0.8),
        0 0 90px rgba(255, 255, 255, 0.5);
    animation: ssjTextGlow 1s ease-in-out infinite;
}

@keyframes ssjTextGlow {

    0%,
    100% {
        text-shadow: 0 0 30px rgba(0, 191, 255, 1),
            0 0 60px rgba(138, 43, 226, 0.8);
    }

    50% {
        text-shadow: 0 0 50px rgba(0, 191, 255, 1),
            0 0 80px rgba(138, 43, 226, 1),
            0 0 100px rgba(255, 255, 255, 0.8);
    }
}

/* ============================================
   CHROMEOS - Effets de défaite
   ============================================ */

/* ChromeOS affaibli - perd son glow */
.character-slot.chromeos-weakening {
    filter: drop-shadow(0 0 10px rgba(255, 45, 85, 0.4)) brightness(0.8);
    animation: chromeosWeaken 0.5s ease-in-out infinite;
}

@keyframes chromeosWeaken {

    0%,
    100% {
        transform: translateX(0);
        filter: brightness(0.8);
    }

    50% {
        transform: translateX(3px);
        filter: brightness(0.7);
    }
}

/* ChromeOS Glitch - bug visuel */
.character-slot.chromeos-glitch {
    animation: chromeosGlitch 0.15s infinite;
    filter: brightness(0.6) saturate(0.5);
}

@keyframes chromeosGlitch {
    0% {
        transform: translateX(0) skewX(0deg);
        opacity: 1;
    }

    20% {
        transform: translateX(-5px) skewX(-5deg);
        opacity: 0.8;
        filter: hue-rotate(90deg) brightness(0.6);
    }

    40% {
        transform: translateX(5px) skewX(5deg);
        opacity: 0.6;
    }

    60% {
        transform: translateX(-3px) skewX(-3deg);
        opacity: 0.9;
        filter: hue-rotate(-90deg) brightness(0.5);
    }

    80% {
        transform: translateX(3px) skewX(3deg);
        opacity: 0.7;
    }

    100% {
        transform: translateX(0) skewX(0deg);
        opacity: 1;
    }
}

/* ChromeOS Déconnexion */
.character-slot.chromeos-disconnect {
    animation: chromeosDisconnect 2s ease-out forwards;
}

@keyframes chromeosDisconnect {
    0% {
        opacity: 1;
        filter: brightness(0.6) saturate(0.5);
    }

    30% {
        opacity: 0.7;
        filter: grayscale(50%) brightness(0.5);
    }

    60% {
        opacity: 0.4;
        filter: grayscale(80%) brightness(0.3);
        transform: scale(0.95);
    }

    100% {
        opacity: 0;
        filter: grayscale(100%) brightness(0);
        transform: scale(0.8) translateY(30px);
    }
}

/* ChromeOS Mort - disparition finale */
.character-slot.chromeos-death {
    animation: chromeosDeath 1.5s ease-out forwards;
}

@keyframes chromeosDeath {
    0% {
        opacity: 0.3;
        filter: grayscale(100%) brightness(0.3);
    }

    100% {
        opacity: 0;
        filter: grayscale(100%) brightness(0);
        transform: translateY(50px) scale(0.5);
    }
}


/* Emotional Shake for multiple characters crying */
.character-slot.shake.fear {
    animation: emotionalShake 0.2s ease-in-out infinite;
}

@keyframes emotionalShake {

    0%,
    100% {
        transform: translateX(0) translateY(0);
    }

    25% {
        transform: translateX(-4px) translateY(-2px);
    }

    50% {
        transform: translateX(4px) translateY(2px);
    }

    75% {
        transform: translateX(-2px) translateY(1px);
    }
}

@keyframes particleFloat {
    0% {
        background-position: 0 0;
    }

    100% {
        background-position: 200px 200px;
    }
}

/* Typing Effect Cursor */
.typing-cursor {
    display: inline-block;
    width: 3px;
    height: 1.2em;
    background: var(--primary-color);
    margin-left: 2px;
    animation: blink 0.8s infinite;
    vertical-align: text-bottom;
}

@keyframes blink {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0;
    }
}

/* Screen Transitions */
.screen.fade-out {
    animation: fadeOut 0.5s ease-out forwards;
}

.screen.fade-in {
    animation: fadeIn 0.5s ease-out forwards;
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }

    to {
        opacity: 0;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }

    .floating-logo,
    .particles-bg,
    #end-screen::before,
    .typing-cursor,
    .character-slot.shake,
    .character-slot.fear,
    .character-slot.happy,
    .character-slot.angry,
    .character-slot.dying,
    .character-slot.dying-slow,
    .character-slot.fade-out-goodbye,
    .character-slot.crying,
    .character-slot.hug-animation,
    .character-slot.death-effect,
    .character-slot.fast-death-effect,
    .character-slot.ubuntu-appear,
    .character-slot.xp-appear,
    .character-slot.windows12-appear,
    .character-slot.lonely,
    .screen.fade-out,
    .screen.fade-in,
    .screen.flash-effect::before,
    .screen-flash.active,
    .transition-text,
    .glow-button,
    .glow-button::before,
    .glow-button:hover,
    .glow-button:hover::before {
        animation: none !important;
        transition: none !important;
    }

    .transition-overlay,
    .scene-bg,
    .act-slide,
    .final-slide,
    .memorial-slide,
    .secret-character,
    .secret-dialogue,
    .reboot-effect.glitch,
    .reboot-effect.flash {
        transition: none !important;
    }

    .particles-bg {
        background-position: 0 0;
    }

    .glow-button:hover {
        transform: none;
    }
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .characters-container {
        padding: 0 2%;
    }

    .character-sprite {
        width: clamp(60px, 25vw, 120px);
    }

    .dialogue-box {
        padding: 1.5rem;
        min-height: 100px;
    }

    .speaker-name {
        padding: 0.4rem 1.2rem;
        font-size: 0.85rem;
    }
}

@media (max-width: 480px) {
    .character-name-tag {
        font-size: 0.7rem;
        padding: 0.3rem 0.8rem;
    }
}

/* ============================================
   Audio Controls
   ============================================ */
.audio-controls-start {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
    padding: 1rem 2rem;
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: 50px;
}

.audio-btn {
    width: 50px;
    height: 50px;
    border: none;
    border-radius: 50%;
    font-size: 1.5rem;
    background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 0 20px rgba(124, 58, 237, 0.4);
}

.audio-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 0 30px rgba(0, 212, 255, 0.6);
}

.audio-btn.muted {
    background: linear-gradient(135deg, #4a4a6a, #3a3a5a);
    box-shadow: none;
}

.volume-slider {
    width: 120px;
    height: 8px;
    -webkit-appearance: none;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    outline: none;
}

.volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary-color);
    cursor: pointer;
    box-shadow: 0 0 10px var(--primary-color);
}

.volume-slider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary-color);
    cursor: pointer;
    border: none;
}

.audio-notice {
    margin-top: 1rem;
    font-size: 0.9rem;
    color: var(--text-secondary);
    opacity: 0.7;
}

.audio-controls-game {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 100;
}

.audio-btn-small {
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 50%;
    font-size: 1.2rem;
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    cursor: pointer;
    transition: all 0.3s ease;
}

.audio-btn-small:hover {
    background: rgba(255, 255, 255, 0.15);
}

.audio-btn-small.muted {
    opacity: 0.5;
}

/* ============================================
   Hospital Scene
   ============================================ */
.hospital-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        linear-gradient(180deg,
            rgba(20, 40, 60, 0.9) 0%,
            rgba(10, 20, 40, 0.95) 50%,
            rgba(5, 10, 25, 1) 100%);
    pointer-events: none;
}

.hospital-bg::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        repeating-linear-gradient(0deg,
            transparent,
            transparent 50px,
            rgba(255, 255, 255, 0.02) 50px,
            rgba(255, 255, 255, 0.02) 51px),
        repeating-linear-gradient(90deg,
            transparent,
            transparent 50px,
            rgba(255, 255, 255, 0.02) 50px,
            rgba(255, 255, 255, 0.02) 51px);
}

.characters-container.hospital-scene {
    top: 15%;
    height: 45%;
}

/* ============================================
   Heart Monitor / ECG
   ============================================ */
.heart-monitor {
    position: absolute;
    top: 3%;
    left: 50%;
    transform: translateX(-50%);
    width: min(400px, 90%);
    background: rgba(0, 10, 20, 0.9);
    border: 2px solid rgba(0, 255, 100, 0.3);
    border-radius: 15px;
    padding: 15px;
    z-index: 50;
    box-shadow:
        0 0 30px rgba(0, 255, 100, 0.2),
        inset 0 0 20px rgba(0, 0, 0, 0.5);
    transition: all 0.5s ease;
}

.heart-monitor.hidden {
    opacity: 0;
    transform: translateX(-50%) translateY(-20px);
    pointer-events: none;
}

.heart-monitor.flatline .monitor-screen {
    border-color: rgba(255, 50, 50, 0.5);
}

.heart-monitor.flatline {
    border-color: rgba(255, 50, 50, 0.5);
    box-shadow: 0 0 30px rgba(255, 50, 50, 0.3);
}

.monitor-screen {
    background: rgba(0, 20, 10, 0.8);
    border: 1px solid rgba(0, 255, 100, 0.3);
    border-radius: 10px;
    height: 80px;
    overflow: hidden;
}

.ecg-svg {
    width: 100%;
    height: 100%;
}

.ecg-path {
    fill: none;
    stroke: #00ff64;
    stroke-width: 2;
    filter: drop-shadow(0 0 5px #00ff64);
    transition: stroke 0.5s ease;
}

.ecg-path.flatline {
    stroke: #ff3232;
    filter: drop-shadow(0 0 5px #ff3232);
}

.monitor-label {
    margin-top: 10px;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.9rem;
    color: #00ff64;
    text-align: center;
    text-shadow: 0 0 10px #00ff64;
}

.monitor-label.flatline {
    color: #ff3232;
    text-shadow: 0 0 10px #ff3232;
}

/* ECG Animation */
@keyframes ecgPulse {
    0% {
        transform: translateX(0);
    }

    100% {
        transform: translateX(-50%);
    }
}

/* ============================================
   Additional Effects
   ============================================ */
.character-slot.hospital-bed {
    position: relative;
}

.character-slot.hospital-bed::after {
    content: '';
    position: absolute;
    bottom: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 120%;
    height: 30px;
    background: linear-gradient(180deg,
            rgba(60, 80, 100, 0.5) 0%,
            rgba(40, 60, 80, 0.8) 100%);
    border-radius: 5px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
}

/* Slow fade for dying */
.character-slot.dying-slow {
    animation: dyingSlow 5s ease-out forwards;
}

@keyframes dyingSlow {
    0% {
        opacity: 1;
        filter: grayscale(0) brightness(1);
    }

    30% {
        opacity: 0.8;
        filter: grayscale(30%) brightness(0.9);
    }

    60% {
        opacity: 0.5;
        filter: grayscale(70%) brightness(0.7);
    }

    100% {
        opacity: 0;
        filter: grayscale(100%) brightness(0.3);
    }
}

/* Screen flash effect */
.screen-flash {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: white;
    opacity: 0;
    pointer-events: none;
    z-index: 1000;
}

.screen-flash.active {
    animation: flashEffect 0.5s ease-out;
}

@keyframes flashEffect {
    0% {
        opacity: 0.8;
    }

    100% {
        opacity: 0;
    }
}

/* ============================================
   Graveyard Scene
   ============================================ */
.graveyard-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        radial-gradient(ellipse at 80% 20%, rgba(80, 60, 120, 0.3) 0%, transparent 40%),
        radial-gradient(circle at 85% 15%, rgba(220, 220, 255, 0.15) 0%, transparent 15%),
        linear-gradient(180deg,
            rgba(15, 10, 30, 1) 0%,
            rgba(25, 20, 45, 0.95) 30%,
            rgba(20, 25, 35, 0.9) 60%,
            rgba(10, 15, 25, 1) 100%);
    pointer-events: none;
}

.graveyard-bg::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 40%;
    background:
        linear-gradient(180deg,
            transparent 0%,
            rgba(30, 40, 35, 0.8) 50%,
            rgba(20, 30, 25, 1) 100%);
}

/* Fog effect */
.graveyard-bg::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 30%;
    background:
        radial-gradient(ellipse at 20% 100%, rgba(100, 100, 120, 0.3) 0%, transparent 60%),
        radial-gradient(ellipse at 80% 100%, rgba(100, 100, 120, 0.25) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 100%, rgba(80, 80, 100, 0.2) 0%, transparent 70%);
    animation: fogDrift 10s ease-in-out infinite;
}

@keyframes fogDrift {

    0%,
    100% {
        transform: translateX(-2%);
        opacity: 0.6;
    }

    50% {
        transform: translateX(2%);
        opacity: 0.8;
    }
}

.characters-container.graveyard-scene {
    top: 20%;
    height: 45%;
}

/* ============================================
   Graves Container
   ============================================ */
.graves-container {
    position: absolute;
    top: 25%;
    left: 0;
    width: 100%;
    height: 35%;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    gap: 3rem;
    padding: 0 15%;
    z-index: 5;
    pointer-events: none;
    opacity: 0;
    transition: opacity 1s ease;
}

.graves-container.visible {
    opacity: 1;
}

.grave {
    display: flex;
    flex-direction: column;
    align-items: center;
    transform: scale(0.7);
    opacity: 0.5;
}

.grave-image {
    width: clamp(50px, 10vw, 100px);
    height: auto;
    filter: grayscale(100%) brightness(0.4) drop-shadow(0 0 10px rgba(100, 100, 150, 0.3));
    opacity: 0.6;
}

.grave.image-missing::after {
    content: 'Image manquante';
    margin-top: 0.35rem;
    font-size: 0.6rem;
    color: rgba(160, 160, 180, 0.7);
    text-align: center;
}

.grave.image-missing .grave-image {
    display: none;
}

.grave-cross {
    font-size: 2rem;
    color: rgba(100, 100, 120, 0.5);
    margin-bottom: 0.3rem;
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
}

.grave-name {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.7rem;
    color: rgba(150, 150, 170, 0.6);
    margin-top: 0.5rem;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
}

.grave-dates {
    font-size: 0.6rem;
    color: rgba(120, 120, 140, 0.5);
    font-style: italic;
}

/* ============================================
   Transition Screen
   ============================================ */
.transition-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 500;
    opacity: 0;
    pointer-events: none;
    transition: opacity 1.5s ease;
}

.transition-overlay.visible {
    opacity: 1;
    pointer-events: auto;
}

.transition-text {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(2rem, 6vw, 4rem);
    color: #ffffff;
    text-align: center;
    opacity: 0;
    transform: translateY(20px);
    animation: transitionFadeIn 2s ease-out 0.5s forwards;
    text-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
}

@keyframes transitionFadeIn {
    0% {
        opacity: 0;
        transform: translateY(20px);
    }

    50% {
        opacity: 1;
        transform: translateY(0);
    }

    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ============================================
   Scene Backgrounds Management
   ============================================ */
.scene-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 1s ease;
    pointer-events: none;
}

.scene-bg.active {
    opacity: 1;
}

/* ============================================
   Void Scene (Le Vide - Scène finale)
   ============================================ */
.void-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        radial-gradient(ellipse at center, rgba(20, 20, 40, 0.5) 0%, transparent 60%),
        linear-gradient(180deg,
            rgba(5, 5, 15, 1) 0%,
            rgba(10, 10, 25, 1) 50%,
            rgba(5, 5, 10, 1) 100%);
    pointer-events: none;
}

.void-bg::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        radial-gradient(circle at 50% 50%, rgba(60, 60, 100, 0.05) 0%, transparent 50%);
    animation: voidPulse 8s ease-in-out infinite;
}

@keyframes voidPulse {

    0%,
    100% {
        opacity: 0.3;
    }

    50% {
        opacity: 0.6;
    }
}

.characters-container.void-scene {
    top: 25%;
    height: 40%;
}

/* Lonely effect for final character */
.character-slot.lonely {
    filter: drop-shadow(0 0 20px rgba(100, 100, 150, 0.3)) brightness(0.8);
    animation: lonelySway 4s ease-in-out infinite;
}

@keyframes lonelySway {

    0%,
    100% {
        transform: translateX(-50%) translateY(0);
    }

    50% {
        transform: translateX(-50%) translateY(-5px);
    }
}

/* ============================================
   Scrolling Credits / Générique de Fin
   ============================================ */
#end-screen {
    background:
        radial-gradient(ellipse at center, rgba(30, 30, 60, 0.3) 0%, transparent 60%),
        linear-gradient(180deg, #050510 0%, #0a0a1a 50%, #050510 100%);
    overflow: hidden;
}

/* Starfield background */
#end-screen::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image:
        radial-gradient(1px 1px at 10% 20%, rgba(255, 255, 255, 0.8), transparent),
        radial-gradient(1px 1px at 20% 40%, rgba(255, 255, 255, 0.6), transparent),
        radial-gradient(1px 1px at 30% 10%, rgba(255, 255, 255, 0.7), transparent),
        radial-gradient(1px 1px at 40% 60%, rgba(255, 255, 255, 0.5), transparent),
        radial-gradient(1px 1px at 50% 30%, rgba(255, 255, 255, 0.8), transparent),
        radial-gradient(1px 1px at 60% 80%, rgba(255, 255, 255, 0.6), transparent),
        radial-gradient(1px 1px at 70% 50%, rgba(255, 255, 255, 0.7), transparent),
        radial-gradient(1px 1px at 80% 20%, rgba(255, 255, 255, 0.5), transparent),
        radial-gradient(1px 1px at 90% 70%, rgba(255, 255, 255, 0.8), transparent),
        radial-gradient(1.5px 1.5px at 15% 55%, rgba(200, 200, 255, 0.9), transparent),
        radial-gradient(1.5px 1.5px at 45% 85%, rgba(200, 200, 255, 0.7), transparent),
        radial-gradient(1.5px 1.5px at 75% 35%, rgba(200, 200, 255, 0.8), transparent);
    background-size: 100% 100%;
    animation: twinkle 8s ease-in-out infinite;
    pointer-events: none;
}

@keyframes twinkle {

    0%,
    100% {
        opacity: 0.6;
    }

    50% {
        opacity: 1;
    }
}

/* Act container - Rétrospective en Actes */
.credits-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 600px;
    text-align: center;
}

.act-slide {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    opacity: 0;
    transition: opacity 1.5s ease-in-out;
    pointer-events: none;
}

.act-slide.visible {
    opacity: 1;
    pointer-events: auto;
}

.act-number {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.85rem;
    font-weight: 400;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 4px;
    margin-bottom: 0.5rem;
}

.act-title {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(1.4rem, 4vw, 2rem);
    font-weight: 700;
    background: linear-gradient(135deg, #7c3aed, #00d4ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.3rem;
}

.act-year {
    font-family: 'Orbitron', sans-serif;
    font-size: 1rem;
    color: #00d4ff;
    margin-bottom: 1.5rem;
    text-shadow: 0 0 15px rgba(0, 212, 255, 0.4);
}

.act-os-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    align-items: center;
    margin-bottom: 1.5rem;
}

.act-os {
    font-size: 1.2rem;
    color: #e5e5e5;
    font-weight: 500;
}

.act-epitaph {
    font-size: 0.9rem;
    color: #9ca3af;
    font-style: italic;
    opacity: 0.8;
}

/* Final Thank You slide */
.final-slide {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    opacity: 0;
    transition: opacity 1.5s ease-in-out;
    pointer-events: none;
}

.final-slide.visible {
    opacity: 1;
    pointer-events: auto;
}

.final-thanks {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(1.8rem, 5vw, 2.5rem);
    font-weight: 900;
    background: linear-gradient(135deg, #ff6b9d, #7c3aed, #00d4ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 1.5rem;
}

.final-subtitle {
    font-size: 1rem;
    color: #9ca3af;
    font-style: italic;
    margin-bottom: 2.5rem;
    line-height: 1.8;
}

.credits-restart-btn {
    padding: 1rem 2.5rem;
    font-family: 'Orbitron', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    color: #ffffff;
    background: linear-gradient(135deg, #7c3aed, #00d4ff);
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 0 20px rgba(124, 58, 237, 0.4);
}

.credits-restart-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 0 40px rgba(0, 212, 255, 0.6);
}

/* ============================================
   Memorial Sequence Styles
   ============================================ */
.memorial-slide {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    opacity: 0;
    transition: opacity 1.5s ease-in-out;
    pointer-events: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2rem;
}

.memorial-slide.visible {
    opacity: 1;
    pointer-events: auto;
}

.memorial-text {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(1.2rem, 4vw, 2rem);
    font-weight: 400;
    color: #e5e5e5;
    text-align: center;
    text-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
    letter-spacing: 1px;
}

.memorial-text.memorial-final {
    font-size: clamp(2rem, 6vw, 3.5rem);
    font-weight: 900;
    background: linear-gradient(135deg, #ff6b9d, #7c3aed, #00d4ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: none;
    margin-bottom: 1rem;
}

/* ============================================
   Secret Post-Credits Scene
   ============================================ */
.secret-scene {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    z-index: 200;
    opacity: 0;
    transition: opacity 1s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.secret-scene.visible {
    opacity: 1;
}

.secret-characters {
    display: flex;
    justify-content: center;
    gap: 4rem;
    margin-bottom: 3rem;
}

.secret-character {
    display: flex;
    flex-direction: column;
    align-items: center;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.8s ease;
}

.secret-character.visible {
    opacity: 1;
    transform: translateY(0);
}

.secret-avatar {
    width: clamp(60px, 12vw, 120px);
    height: auto;
    filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.2));
    animation: secretFloat 3s ease-in-out infinite;
}

.secret-name {
    margin-top: 0.8rem;
    font-family: 'Orbitron', sans-serif;
    font-size: 1rem;
    font-weight: 600;
    text-shadow: 0 0 10px currentColor;
}

@keyframes secretFloat {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-8px);
    }
}

.secret-dialogue {
    position: absolute;
    bottom: 20%;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    opacity: 0;
    transition: opacity 0.5s ease;
    max-width: 80%;
}

.secret-dialogue.visible {
    opacity: 1;
}

.secret-speaker {
    display: block;
    font-family: 'Orbitron', sans-serif;
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    text-shadow: 0 0 15px currentColor;
}

.secret-text {
    display: block;
    font-size: 1.3rem;
    color: #e5e5e5;
    font-style: italic;
    line-height: 1.6;
}

/* ============================================
   Reboot Effect
   ============================================ */
.reboot-effect {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 300;
    pointer-events: none;
}

.reboot-effect.glitch {
    animation: glitchEffect 0.1s linear infinite;
    background:
        linear-gradient(90deg, transparent 0%, rgba(255, 0, 0, 0.1) 50%, transparent 100%),
        linear-gradient(0deg, transparent 0%, rgba(0, 255, 0, 0.05) 50%, transparent 100%);
}

@keyframes glitchEffect {
    0% {
        clip-path: inset(40% 0 61% 0);
        background-position: -5px 0;
    }

    20% {
        clip-path: inset(92% 0 1% 0);
        background-position: 5px 0;
    }

    40% {
        clip-path: inset(43% 0 1% 0);
        background-position: -3px 0;
    }

    60% {
        clip-path: inset(25% 0 58% 0);
        background-position: 3px 0;
    }

    80% {
        clip-path: inset(54% 0 7% 0);
        background-position: -2px 0;
    }

    100% {
        clip-path: inset(58% 0 43% 0);
        background-position: 2px 0;
    }
}

.reboot-effect.flash {
    background: white;
    animation: flashPulse 0.3s ease-out forwards;
}

@keyframes flashPulse {
    0% {
        opacity: 1;
    }

    100% {
        opacity: 0;
    }
}

.reboot-effect.blackout {
    background: #0a0a0a;
    opacity: 1;
    pointer-events: auto;
    display: flex;
    align-items: center;
    justify-content: center;
}

.reboot-text {
    font-family: 'Courier New', monospace;
    color: #00ff00;
    text-align: left;
    animation: textFlicker 0.5s ease-out;
}

.reboot-line {
    font-size: 1.1rem;
    margin-bottom: 0.3rem;
    text-shadow: 0 0 10px #00ff00;
}

.reboot-cursor {
    animation: cursorBlink 0.8s infinite;
}

@keyframes cursorBlink {

    0%,
    50% {
        opacity: 1;
    }

    51%,
    100% {
        opacity: 0;
    }
}

@keyframes textFlicker {
    0% {
        opacity: 0;
    }

    10%,
    30%,
    50%,
    70%,
    90% {
        opacity: 0.8;
    }

    20%,
    40%,
    60%,
    80%,
    100% {
        opacity: 1;
    }
}

/* ============================================
   TASKBAR MEDIA PLAYER - Style Windows Aero
   ============================================ */

#taskbar-player {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 600px;
    padding: 12px 24px;
    display: flex;
    align-items: center;
    gap: 16px;
    z-index: 9999;

    /* Fond dégradé Aero/Vista */
    background: linear-gradient(180deg,
            rgba(80, 140, 200, 0.95) 0%,
            rgba(40, 100, 180, 0.92) 40%,
            rgba(20, 70, 150, 0.95) 100%);

    /* Reflet brillant en haut */
    box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.5),
        inset 0 2px 4px rgba(255, 255, 255, 0.25),
        0 -2px 10px rgba(0, 100, 200, 0.3),
        0 4px 20px rgba(0, 0, 0, 0.4);

    /* Bordure arrondie en haut */
    border-radius: 16px 16px 0 0;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-bottom: none;

    /* Glassmorphism */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
}

/* Poignée décorative (style WMP) */
.wmp-handle {
    width: 4px;
    height: 30px;
    background: linear-gradient(180deg,
            rgba(255, 255, 255, 0.6) 0%,
            rgba(255, 255, 255, 0.2) 100%);
    border-radius: 2px;
    margin-right: 8px;
}

/* Informations de la piste */
.wmp-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 0;
}

#wmp-title {
    font-family: 'Segoe UI', 'Inter', sans-serif;
    font-size: 0.95rem;
    font-weight: 600;
    color: #ffffff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

#wmp-timer {
    font-family: 'Segoe UI', 'Inter', monospace;
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.7);
}

/* Conteneur des boutons */
.wmp-controls {
    display: flex;
    align-items: center;
    gap: 8px;
}

/* Boutons Media Player */
.wmp-btn {
    cursor: pointer;
    transition: all 0.15s ease;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    border-radius: 4px;
}

.wmp-btn:hover {
    transform: scale(1.1);
    filter:
        drop-shadow(0 2px 8px rgba(0, 200, 255, 0.5)) brightness(1.2);
}

.wmp-btn:active {
    transform: scale(0.95);
}

/* Taille des boutons */
.wmp-btn.small {
    width: 32px;
    height: 32px;
}

.wmp-btn.big {
    width: 48px;
    height: 48px;
}

/* Animation de pulsation pour le bouton play */
.wmp-btn.big.playing {
    animation: wmPlayerPulse 2s ease-in-out infinite;
}

@keyframes wmPlayerPulse {

    0%,
    100% {
        transform: scale(1);
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    50% {
        transform: scale(1.05);
        filter: drop-shadow(0 2px 12px rgba(0, 200, 255, 0.6));
    }
}

/* Responsive */
@media (max-width: 480px) {
    #taskbar-player {
        padding: 10px 16px;
        gap: 12px;
    }

    .wmp-btn.small {
        width: 28px;
        height: 28px;
    }

    .wmp-btn.big {
        width: 40px;
        height: 40px;
    }

    #wmp-title {
        font-size: 0.85rem;
    }

    .wmp-handle {
        display: none;
    }
}

/* ============================================
   Memorial Slideshow - Diaporama hommage
   ============================================ */

.memorial-slideshow-overlay {
    position: fixed;
    inset: 0;
    background: #000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 0;
    transition: opacity 1.5s ease;
}

.memorial-slideshow-overlay.visible {
    opacity: 1;
}

.memorial-slideshow-content {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 80%;
}

.memorial-slideshow-image {
    max-width: 60%;
    max-height: 70%;
    object-fit: contain;
    opacity: 0;
    transition: opacity 1.5s ease;
    filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.2));
}

.memorial-slideshow-image.visible {
    opacity: 1;
}

.memorial-slideshow-caption {
    position: absolute;
    bottom: 8%;
    left: 50%;
    transform: translateX(-50%);
    font-family: 'Inter', serif;
    font-size: clamp(1rem, 2.5vw, 1.5rem);
    color: rgba(255, 255, 255, 0.7);
    font-style: italic;
    text-align: center;
    letter-spacing: 0.1em;
    text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
}

/* ============================================
   🕊️ AFTERLIFE SCENE - L'Accueil dans l'Au-delà
   ============================================ */

.afterlife-overlay {
    position: fixed;
    inset: 0;
    background: linear-gradient(180deg,
            #0a0a20 0%,
            #1a1a3a 30%,
            #2a2a50 60%,
            #1a1a3a 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 0;
    transition: opacity 1.5s ease;
    overflow: hidden;
}

.afterlife-overlay.visible {
    opacity: 1;
}

/* Fond étoilé animé */
.afterlife-bg {
    position: absolute;
    inset: 0;
    pointer-events: none;
}

.afterlife-stars {
    position: absolute;
    inset: 0;
    background-image:
        radial-gradient(2px 2px at 10% 10%, rgba(255, 255, 255, 0.9), transparent),
        radial-gradient(2px 2px at 20% 30%, rgba(255, 255, 255, 0.7), transparent),
        radial-gradient(1px 1px at 30% 20%, rgba(255, 255, 255, 0.8), transparent),
        radial-gradient(3px 3px at 40% 60%, rgba(255, 255, 255, 0.6), transparent),
        radial-gradient(2px 2px at 50% 40%, rgba(255, 255, 255, 0.9), transparent),
        radial-gradient(1px 1px at 60% 80%, rgba(255, 255, 255, 0.7), transparent),
        radial-gradient(2px 2px at 70% 15%, rgba(255, 255, 255, 0.8), transparent),
        radial-gradient(3px 3px at 80% 50%, rgba(255, 255, 255, 0.6), transparent),
        radial-gradient(2px 2px at 90% 70%, rgba(255, 255, 255, 0.9), transparent),
        radial-gradient(1px 1px at 15% 85%, rgba(200, 220, 255, 0.8), transparent),
        radial-gradient(2px 2px at 25% 55%, rgba(200, 220, 255, 0.7), transparent),
        radial-gradient(1px 1px at 35% 75%, rgba(200, 220, 255, 0.6), transparent),
        radial-gradient(2px 2px at 55% 25%, rgba(255, 230, 200, 0.8), transparent),
        radial-gradient(1px 1px at 75% 95%, rgba(255, 230, 200, 0.7), transparent),
        radial-gradient(2px 2px at 85% 35%, rgba(255, 230, 200, 0.6), transparent),
        radial-gradient(1px 1px at 95% 5%, rgba(255, 200, 255, 0.8), transparent);
    animation: afterlifeStarsTwinkle 4s ease-in-out infinite;
}

@keyframes afterlifeStarsTwinkle {

    0%,
    100% {
        opacity: 0.6;
    }

    50% {
        opacity: 1;
    }
}

/* Nuages célestes */
.afterlife-clouds {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 200%;
    height: 40%;
    background:
        radial-gradient(ellipse 80% 40% at 20% 80%, rgba(180, 180, 220, 0.15), transparent),
        radial-gradient(ellipse 60% 30% at 50% 90%, rgba(200, 200, 240, 0.12), transparent),
        radial-gradient(ellipse 70% 35% at 80% 85%, rgba(180, 180, 220, 0.15), transparent);
    animation: afterlifeCloudsFloat 20s linear infinite;
    pointer-events: none;
}

@keyframes afterlifeCloudsFloat {
    0% {
        transform: translateX(0);
    }

    100% {
        transform: translateX(-50%);
    }
}

/* Conteneur des personnages */
.afterlife-characters {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 3rem;
    margin-bottom: 2rem;
    z-index: 10;
}

/* Groupe des anciens (en haut) */
.afterlife-ancients {
    display: flex;
    justify-content: center;
    gap: 2rem;
}

/* Groupe des nouveaux arrivants (en bas) */
.afterlife-newcomers {
    display: flex;
    justify-content: center;
    gap: 2rem;
}

/* Logo de personnage */
.afterlife-char {
    width: clamp(80px, 15vw, 140px);
    height: auto;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.8s ease;
    filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.3));
}

.afterlife-char.visible {
    opacity: 1;
    transform: translateY(0);
    animation: afterlifeFloat 3s ease-in-out infinite;
}

/* Animation de flottement */
@keyframes afterlifeFloat {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-10px);
    }
}

/* Effet d'apparition fantomatique pour les nouveaux arrivants */
.afterlife-char.ghost-appear {
    animation: ghostAppear 1.5s ease-out forwards, afterlifeFloat 3s ease-in-out 1.5s infinite;
}

@keyframes ghostAppear {
    0% {
        opacity: 0;
        transform: translateY(50px) scale(0.5);
        filter: brightness(2) saturate(0) blur(10px);
    }

    50% {
        opacity: 0.7;
        transform: translateY(20px) scale(0.9);
        filter: brightness(1.5) saturate(0.5) blur(3px);
    }

    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
        filter: brightness(1) saturate(1) blur(0) drop-shadow(0 0 20px rgba(255, 255, 255, 0.5));
    }
}

/* Boîte de dialogue */
.afterlife-dialogue {
    position: absolute;
    bottom: 15%;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 700px;
    text-align: center;
    z-index: 20;
}

.afterlife-speaker {
    display: inline-block;
    padding: 0.5rem 1.5rem;
    font-family: 'Orbitron', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    color: #fff;
    border-radius: 15px 15px 0 0;
    margin-bottom: -2px;
    opacity: 0;
    transition: opacity 0.5s ease;
}

.afterlife-speaker.visible {
    opacity: 1;
}

.afterlife-text {
    padding: 1.5rem 2rem;
    font-family: 'Inter', sans-serif;
    font-size: clamp(1rem, 2.5vw, 1.3rem);
    color: #e5e5e5;
    background: rgba(20, 20, 40, 0.9);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 15px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    opacity: 0;
    transition: opacity 0.5s ease;
    line-height: 1.6;
}

.afterlife-text.visible {
    opacity: 1;
}

/* Indicateur "cliquer pour continuer" */
.afterlife-continue {
    position: absolute;
    bottom: 5%;
    left: 50%;
    transform: translateX(-50%);
    font-family: 'Inter', sans-serif;
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.5);
    opacity: 0;
    transition: opacity 0.5s ease;
    animation: afterlifePulse 1.5s ease-in-out infinite;
}

.afterlife-continue.visible {
    opacity: 1;
}

@keyframes afterlifePulse {

    0%,
    100% {
        opacity: 0.5;
    }

    50% {
        opacity: 1;
    }
}

/* Responsive */
@media (max-width: 600px) {

    .afterlife-ancients,
    .afterlife-newcomers {
        gap: 1rem;
    }

    .afterlife-char {
        width: clamp(60px, 12vw, 100px);
    }

    .afterlife-text {
        padding: 1rem 1.5rem;
        font-size: 0.95rem;
    }

    .afterlife-dialogue {
        bottom: 10%;
        width: 95%;
    }
}

/* ============================================
   🕊️ AFTERLIFE SCENE 2000 - Layout spécial
   Groupe à gauche, Windows 2000 à droite
   ============================================ */

.afterlife-2000-layout {
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 4rem;
    width: 90%;
    max-width: 1000px;
}

.afterlife-group-left {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1rem;
    max-width: 50%;
}

.afterlife-group-left .afterlife-char {
    width: clamp(60px, 10vw, 100px);
}

.afterlife-group-right {
    display: flex;
    justify-content: center;
    align-items: center;
}

.afterlife-group-right .afterlife-char {
    width: clamp(100px, 20vw, 180px);
}

/* Windows 2000 légèrement surélevé avec costume stylé */
.afterlife-2000 {
    filter: drop-shadow(0 0 25px rgba(0, 51, 153, 0.5)) drop-shadow(0 0 40px rgba(255, 255, 255, 0.3));
}

/* Responsive pour la scène 2000 */
@media (max-width: 768px) {
    .afterlife-2000-layout {
        flex-direction: column;
        gap: 2rem;
    }

    .afterlife-group-left {
        max-width: 90%;
    }

    .afterlife-group-left .afterlife-char {
        width: clamp(50px, 8vw, 70px);
    }

    .afterlife-group-right .afterlife-char {
        width: clamp(80px, 15vw, 120px);
    }
}

/* ============================================
   🕊️👑 AFTERLIFE SCENE XP - Layout spécial
   Ancêtres à gauche, XP au centre, Modernes à droite
   ============================================ */

.afterlife-xp-layout {
    flex-direction: row;
    justify-content: center;
    align-items: flex-start;
    gap: 2rem;
    width: 95%;
    max-width: 1200px;
    padding-top: 5%;
}

.afterlife-group-ancestors,
.afterlife-group-moderns {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

.afterlife-group-label {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.7);
    margin-bottom: 0.5rem;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
}

.afterlife-group-logos {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.8rem;
}

.afterlife-group-logos .afterlife-char {
    width: clamp(50px, 8vw, 80px);
}

/* XP au centre avec effet royal */
.afterlife-center-xp {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
}

.afterlife-xp-king {
    width: clamp(120px, 25vw, 200px) !important;
    filter: drop-shadow(0 0 30px rgba(255, 140, 0, 0.6)) drop-shadow(0 0 60px rgba(255, 200, 100, 0.4));
}

/* Couronne animée */
.afterlife-crown {
    font-size: clamp(2rem, 5vw, 3.5rem);
    position: absolute;
    top: -2.5rem;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 0.8s ease, transform 0.8s ease;
    filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.8));
    animation: crownBounce 2s ease-in-out infinite;
}

.afterlife-crown.visible {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

@keyframes crownBounce {

    0%,
    100% {
        transform: translateX(-50%) translateY(0);
    }

    50% {
        transform: translateX(-50%) translateY(-8px);
    }
}

/* Responsive pour la scène XP */
@media (max-width: 768px) {
    .afterlife-xp-layout {
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
        padding-top: 2%;
    }

    .afterlife-group-ancestors,
    .afterlife-group-moderns {
        flex-direction: row;
        gap: 1rem;
    }

    .afterlife-group-label {
        display: none;
    }

    .afterlife-group-logos .afterlife-char {
        width: clamp(40px, 7vw, 60px);
    }

    .afterlife-xp-king {
        width: clamp(80px, 18vw, 120px) !important;
    }

    .afterlife-crown {
        font-size: 2rem;
        top: -1.8rem;
    }
}

/* ============================================
   🕊️🟦 AFTERLIFE SCENE 8 - Layout spécial
   XP en chef avec groupe à gauche, Windows 8 à droite
   ============================================ */

.afterlife-8-layout {
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 4rem;
    width: 95%;
    max-width: 1100px;
}

.afterlife-group-with-leader {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
}

.afterlife-leader-xp {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
}

.afterlife-leader {
    width: clamp(90px, 15vw, 140px) !important;
    filter: drop-shadow(0 0 25px rgba(255, 140, 0, 0.5));
}

.afterlife-leader-badge {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.8rem;
    color: #ffd700;
    margin-top: 0.3rem;
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
}

.afterlife-followers {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.6rem;
    max-width: 300px;
}

.afterlife-follower {
    width: clamp(45px, 7vw, 65px) !important;
}

.afterlife-newcomer-8 {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
}

.afterlife-win8 {
    width: clamp(100px, 18vw, 160px) !important;
    filter: drop-shadow(0 0 20px rgba(0, 173, 239, 0.5));
}

.afterlife-age-badge {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.85rem;
    color: #00adef;
    margin-top: 0.5rem;
    text-shadow: 0 0 10px rgba(0, 173, 239, 0.5);
}

/* Responsive pour la scène 8 */
@media (max-width: 768px) {
    .afterlife-8-layout {
        flex-direction: column;
        gap: 2rem;
    }

    .afterlife-leader {
        width: clamp(70px, 12vw, 100px) !important;
    }

    .afterlife-follower {
        width: clamp(35px, 6vw, 50px) !important;
    }

    .afterlife-followers {
        max-width: 220px;
    }

    .afterlife-win8 {
        width: clamp(80px, 15vw, 120px) !important;
    }
}

/* ============================================
   🕊️⏳ AFTERLIFE SCENE VISTA - Layout spécial
   Deux groupes séparés, Vista au centre (lent)
   ============================================ */

.afterlife-vista-layout {
    flex-direction: row;
    justify-content: center;
    align-items: flex-start;
    gap: 2rem;
    width: 95%;
    max-width: 1200px;
    padding-top: 3%;
}

.afterlife-group-ancients-lost,
.afterlife-group-moderns-shocked {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

.afterlife-vista-center {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    min-width: 150px;
}

.afterlife-loading-text {
    font-family: 'Orbitron', sans-serif;
    font-size: 1rem;
    color: #00cc6a;
    opacity: 0;
    transition: opacity 0.5s ease;
    margin-bottom: 1rem;
    animation: loadingPulse 1s ease-in-out infinite;
}

.afterlife-loading-text.visible {
    opacity: 1;
}

@keyframes loadingPulse {

    0%,
    100% {
        opacity: 0.5;
    }

    50% {
        opacity: 1;
    }
}

.afterlife-vista-slow {
    width: clamp(100px, 20vw, 180px) !important;
    filter: drop-shadow(0 0 25px rgba(0, 204, 106, 0.5)) drop-shadow(0 0 50px rgba(0, 204, 106, 0.3));
}

/* Animation d'apparition LENTE pour Vista (effet comique) */
.slow-ghost-appear {
    animation: slowGhostAppear 3s ease-out forwards !important;
}

@keyframes slowGhostAppear {
    0% {
        opacity: 0;
        transform: translateY(80px) scale(0.3);
        filter: brightness(0.5) saturate(0) blur(20px);
    }

    20% {
        opacity: 0.2;
        transform: translateY(60px) scale(0.5);
        filter: brightness(0.7) saturate(0.2) blur(15px);
    }

    40% {
        opacity: 0.4;
        transform: translateY(40px) scale(0.7);
        filter: brightness(0.8) saturate(0.5) blur(10px);
    }

    60% {
        opacity: 0.6;
        transform: translateY(20px) scale(0.85);
        filter: brightness(0.9) saturate(0.7) blur(5px);
    }

    80% {
        opacity: 0.8;
        transform: translateY(10px) scale(0.95);
        filter: brightness(1) saturate(0.9) blur(2px);
    }

    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
        filter: brightness(1) saturate(1) blur(0) drop-shadow(0 0 25px rgba(0, 204, 106, 0.5));
    }
}

/* Responsive pour la scène Vista */
@media (max-width: 768px) {
    .afterlife-vista-layout {
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
        padding-top: 2%;
    }

    .afterlife-group-ancients-lost,
    .afterlife-group-moderns-shocked {
        flex-direction: row;
        gap: 0.5rem;
    }

    .afterlife-vista-slow {
        width: clamp(80px, 15vw, 120px) !important;
    }

    .afterlife-loading-text {
        font-size: 0.85rem;
    }
}

/* ============================================
   🕊️👑 AFTERLIFE SCENE 7 - Layout spécial
   Deux groupes + Les Deux Rois au centre (XP & 7)
   ============================================ */

.afterlife-7-layout {
    flex-direction: row;
    justify-content: center;
    align-items: flex-start;
    gap: 2rem;
    width: 95%;
    max-width: 1200px;
    padding-top: 3%;
}

.afterlife-group-ancients-confused,
.afterlife-group-moderns-knowing {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

/* Section centrale : Les Deux Rois */
.afterlife-kings-reunion {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
}

.afterlife-kings-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.2rem;
    color: #ffd700;
    text-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
    opacity: 0;
    transition: opacity 0.8s ease;
}

.afterlife-kings-title.visible {
    opacity: 1;
    animation: kingsTitleGlow 2s ease-in-out infinite;
}

@keyframes kingsTitleGlow {

    0%,
    100% {
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    50% {
        text-shadow: 0 0 25px rgba(255, 215, 0, 0.9), 0 0 40px rgba(255, 215, 0, 0.5);
    }
}

.afterlife-kings-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1rem;
}

.afterlife-king-xp,
.afterlife-king-7 {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.afterlife-king-char {
    width: clamp(80px, 15vw, 130px) !important;
}

/* Windows 7 avec effet royal bleu */
.afterlife-win7 {
    filter: drop-shadow(0 0 25px rgba(0, 168, 232, 0.6)) drop-shadow(0 0 50px rgba(0, 168, 232, 0.4));
}

/* Responsive pour la scène 7 */
@media (max-width: 768px) {
    .afterlife-7-layout {
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
        padding-top: 2%;
    }

    .afterlife-group-ancients-confused,
    .afterlife-group-moderns-knowing {
        flex-direction: row;
        gap: 0.5rem;
    }

    .afterlife-kings-title {
        font-size: 1rem;
    }

    .afterlife-king-char {
        width: clamp(60px, 12vw, 100px) !important;
    }
}

/* ============================================
   🕊️🔧 AFTERLIFE SCENE 8.1 - Layout spécial
   Deux groupes + Les Frères 8 au centre (8 & 8.1)
   ============================================ */

.afterlife-81-layout {
    flex-direction: row;
    justify-content: center;
    align-items: flex-start;
    gap: 2rem;
    width: 95%;
    max-width: 1200px;
    padding-top: 3%;
}

.afterlife-group-ancients-81,
.afterlife-group-moderns-81 {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

/* Section centrale : Les Frères 8 */
.afterlife-brothers-reunion {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
}

.afterlife-brothers-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.1rem;
    color: #00adef;
    text-shadow: 0 0 15px rgba(0, 173, 239, 0.7);
    opacity: 0;
    transition: opacity 0.8s ease;
}

.afterlife-brothers-title.visible {
    opacity: 1;
}

.afterlife-brothers-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1rem;
}

.afterlife-bro-8,
.afterlife-bro-81 {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.afterlife-bro-char {
    width: clamp(70px, 13vw, 110px) !important;
}

/* Windows 8.1 avec effet bleu clair */
.afterlife-win81 {
    filter: drop-shadow(0 0 20px rgba(0, 191, 255, 0.5)) drop-shadow(0 0 40px rgba(0, 191, 255, 0.3));
}

/* Windows 3.1 buddy (copain de virgule) */
.afterlife-31-buddy.visible {
    animation: buddyHighlight 3s ease-in-out 3.5s;
}

@keyframes buddyHighlight {

    0%,
    100% {
        filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.3));
    }

    50% {
        filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.8));
    }
}

/* Responsive pour la scène 8.1 */
@media (max-width: 768px) {
    .afterlife-81-layout {
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
        padding-top: 2%;
    }

    .afterlife-group-ancients-81,
    .afterlife-group-moderns-81 {
        flex-direction: row;
        gap: 0.5rem;
    }

    .afterlife-brothers-title {
        font-size: 0.95rem;
    }

    .afterlife-bro-char {
        width: clamp(55px, 10vw, 90px) !important;
    }
}

/* ============================================
   🕊️👑👑👑 AFTERLIFE SCENE 10 - Layout spécial
   Les Trois Rois au centre (XP, 7, 10)
   ============================================ */

.afterlife-10-layout {
    flex-direction: row;
    justify-content: center;
    align-items: flex-start;
    gap: 1.5rem;
    width: 95%;
    max-width: 1300px;
    padding-top: 2%;
}

.afterlife-group-ancients-10,
.afterlife-group-moderns-10 {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

/* Section centrale épique : Les Trois Rois */
.afterlife-three-kings {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    min-width: 280px;
}

.afterlife-kings-banner {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.3rem;
    color: #ffd700;
    text-shadow:
        0 0 10px rgba(255, 215, 0, 0.7),
        0 0 20px rgba(255, 215, 0, 0.5),
        0 0 30px rgba(255, 215, 0, 0.3);
    opacity: 0;
    transition: opacity 1s ease;
    letter-spacing: 0.1em;
}

.afterlife-kings-banner.visible {
    opacity: 1;
    animation: bannerGlow 3s ease-in-out infinite;
}

@keyframes bannerGlow {

    0%,
    100% {
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.7), 0 0 20px rgba(255, 215, 0, 0.5);
    }

    50% {
        text-shadow: 0 0 20px rgba(255, 215, 0, 1), 0 0 40px rgba(255, 215, 0, 0.7), 0 0 60px rgba(255, 215, 0, 0.4);
    }
}

.afterlife-kings-trio {
    display: flex;
    justify-content: center;
    align-items: flex-end;
    gap: 0.8rem;
}

.afterlife-king-slot {
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* Le roi du centre (Windows 10) un peu plus grand */
.afterlife-king-center .afterlife-king-trio-char {
    width: clamp(100px, 18vw, 160px) !important;
}

.afterlife-king-trio-char {
    width: clamp(80px, 14vw, 130px) !important;
}

.afterlife-king-name {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.9rem;
    color: #ffd700;
    margin-top: 0.3rem;
    text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
}

/* Windows 10 avec effet bleu royal */
.afterlife-win10 {
    filter: drop-shadow(0 0 30px rgba(0, 120, 212, 0.7)) drop-shadow(0 0 50px rgba(0, 120, 212, 0.4));
}

/* Responsive pour la scène 10 */
@media (max-width: 900px) {
    .afterlife-10-layout {
        flex-direction: column;
        align-items: center;
        gap: 1.2rem;
        padding-top: 1%;
    }

    .afterlife-group-ancients-10,
    .afterlife-group-moderns-10 {
        flex-direction: row;
        gap: 0.4rem;
    }

    .afterlife-kings-banner {
        font-size: 1rem;
    }

    .afterlife-king-trio-char {
        width: clamp(60px, 11vw, 100px) !important;
    }

    .afterlife-king-center .afterlife-king-trio-char {
        width: clamp(75px, 14vw, 120px) !important;
    }

    .afterlife-three-kings {
        min-width: auto;
    }
}

/* ============================================
   😈 CHROMEOS VILLAIN - Animations spéciales
   Le méchant qui débarque dans l'Au-delà
   ============================================ */

/* Zone du méchant (en haut au centre) */
.afterlife-villain-zone {
    position: absolute;
    top: 8%;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    z-index: 100;
    transition: opacity 0.5s ease;
}

.afterlife-villain-zone.visible {
    opacity: 1;
}

.afterlife-villain-char {
    width: clamp(80px, 12vw, 120px);
    filter: drop-shadow(0 0 20px rgba(66, 133, 244, 0.7));
    transition: all 0.3s ease;
}

/* Animation d'apparition avec rotation rapide (spin-in) */
.afterlife-villain-zone.villain-spin-in {
    animation: villainSpinIn 1s ease-out forwards;
}

@keyframes villainSpinIn {
    0% {
        opacity: 0;
        transform: translateX(-50%) scale(0) rotate(-720deg);
    }

    50% {
        opacity: 1;
        transform: translateX(-50%) scale(1.3) rotate(-180deg);
    }

    100% {
        opacity: 1;
        transform: translateX(-50%) scale(1) rotate(0deg);
    }
}

/* Animation de vibration/colère pour ChromeOS */
.afterlife-villain-char.villain-angry {
    animation: villainAngryVibrate 0.1s linear infinite;
    filter: drop-shadow(0 0 25px rgba(255, 0, 0, 0.8)) drop-shadow(0 0 40px rgba(255, 100, 0, 0.6));
}

@keyframes villainAngryVibrate {

    0%,
    100% {
        transform: translateX(0) rotate(0deg);
    }

    25% {
        transform: translateX(-4px) rotate(-2deg);
    }

    50% {
        transform: translateX(4px) rotate(2deg);
    }

    75% {
        transform: translateX(-4px) rotate(-1deg);
    }
}

/* Mode défense des Windows (bouclier lumineux) */
.afterlife-king-trio-char.defense-mode {
    animation: defenseShield 0.5s ease-out forwards;
    filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.9)) drop-shadow(0 0 50px rgba(0, 120, 212, 0.7)) !important;
}

@keyframes defenseShield {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.15);
    }

    100% {
        transform: scale(1.1);
    }
}

/* Animation de fuite de ChromeOS */
.afterlife-villain-zone.villain-flee {
    animation: villainFlee 1s ease-in forwards;
}

@keyframes villainFlee {
    0% {
        opacity: 1;
        transform: translateX(-50%) scale(1) rotate(0deg);
    }

    30% {
        transform: translateX(-30%) scale(0.9) rotate(15deg);
    }

    100% {
        opacity: 0;
        transform: translateX(150%) scale(0.3) rotate(360deg);
    }
}

/* Style spécial pour le speaker méchant */
.afterlife-speaker.villain-speaker {
    background: linear-gradient(135deg, #4285F4, #EA4335, #FBBC05, #34A853) !important;
    animation: villainSpeakerGlow 0.5s ease-in-out infinite alternate;
}

@keyframes villainSpeakerGlow {
    0% {
        box-shadow: 0 0 10px rgba(66, 133, 244, 0.5);
    }

    100% {
        box-shadow: 0 0 25px rgba(234, 67, 53, 0.8), 0 0 35px rgba(251, 188, 5, 0.5);
    }
}

/* Responsive pour le méchant */
@media (max-width: 768px) {
    .afterlife-villain-zone {
        top: 5%;
    }

    .afterlife-villain-char {
        width: clamp(60px, 10vw, 90px);
    }
}

/* ============================================
   WINDOWS 11 SSJ - Super Saiyan Mode
   ============================================ */

.character-slot.ssj {
    animation: ssjAura 0.3s ease-out forwards;
}

.character-slot.ssj::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 200%;
    height: 200%;
    transform: translate(-50%, -50%);
    background: radial-gradient(ellipse at center,
            rgba(255, 215, 0, 0.6) 0%,
            rgba(255, 165, 0, 0.4) 30%,
            rgba(255, 100, 0, 0.2) 50%,
            transparent 70%);
    border-radius: 50%;
    z-index: -1;
    animation: ssjPulse 0.5s ease-in-out infinite alternate;
}

.character-slot.ssj::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 250%;
    height: 250%;
    transform: translate(-50%, -50%);
    background: radial-gradient(ellipse at center,
            rgba(255, 255, 100, 0.3) 0%,
            rgba(255, 200, 50, 0.15) 40%,
            transparent 60%);
    border-radius: 50%;
    z-index: -2;
    animation: ssjOuterAura 1s ease-in-out infinite;
}

.character-slot.ssj .character-sprite {
    filter:
        drop-shadow(0 0 20px rgba(255, 215, 0, 0.9)) drop-shadow(0 0 40px rgba(255, 165, 0, 0.7)) drop-shadow(0 0 60px rgba(255, 100, 0, 0.5)) brightness(1.2) !important;
    animation: ssjGlow 0.2s ease-in-out infinite alternate;
}

.character-slot.ssj .character-name-tag {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(255, 165, 0, 0.3)) !important;
    border-color: rgba(255, 215, 0, 0.6) !important;
    color: #ffd700 !important;
    text-shadow: 0 0 15px rgba(255, 215, 0, 0.8) !important;
    animation: ssjNameGlow 0.5s ease-in-out infinite alternate;
}

@keyframes ssjAura {
    0% {
        filter: brightness(1);
        transform: scale(1);
    }

    50% {
        filter: brightness(2);
        transform: scale(1.15);
    }

    100% {
        filter: brightness(1.3);
        transform: scale(1.1);
    }
}

@keyframes ssjPulse {
    0% {
        transform: translate(-50%, -50%) scale(0.9);
        opacity: 0.7;
    }

    100% {
        transform: translate(-50%, -50%) scale(1.1);
        opacity: 1;
    }
}

@keyframes ssjOuterAura {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        opacity: 0.5;
    }

    50% {
        transform: translate(-50%, -50%) scale(1.2) rotate(180deg);
        opacity: 0.8;
    }
}

@keyframes ssjGlow {
    0% {
        filter:
            drop-shadow(0 0 15px rgba(255, 215, 0, 0.8)) drop-shadow(0 0 35px rgba(255, 165, 0, 0.6)) brightness(1.15);
    }

    100% {
        filter:
            drop-shadow(0 0 25px rgba(255, 215, 0, 1)) drop-shadow(0 0 50px rgba(255, 165, 0, 0.8)) brightness(1.25);
    }
}

@keyframes ssjNameGlow {
    0% {
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    100% {
        box-shadow: 0 0 25px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 165, 0, 0.5);
    }
}

/* SSJ Calm Mode (après victoire) */
.character-slot.ssj-calm::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 150%;
    height: 150%;
    transform: translate(-50%, -50%);
    background: radial-gradient(ellipse at center,
            rgba(255, 215, 0, 0.3) 0%,
            rgba(255, 165, 0, 0.15) 50%,
            transparent 70%);
    border-radius: 50%;
    z-index: -1;
    animation: ssjCalmPulse 2s ease-in-out infinite;
}

.character-slot.ssj-calm .character-sprite {
    filter:
        drop-shadow(0 0 15px rgba(255, 215, 0, 0.5)) drop-shadow(0 0 25px rgba(255, 165, 0, 0.3)) brightness(1.1) !important;
}

@keyframes ssjCalmPulse {

    0%,
    100% {
        opacity: 0.5;
    }

    50% {
        opacity: 0.8;
    }
}

/* ============================================
   ARC END OVERLAY - Fin de chapitre
   ============================================ */

.arc-end-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.arc-end-overlay.visible {
    opacity: 1;
}

.arc-end-content {
    text-align: center;
    transform: scale(0.9);
    transition: transform 0.3s ease;
}

.arc-end-overlay.visible .arc-end-content {
    transform: scale(1);
}

.arc-end-title {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    color: #ffd700;
    text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
    margin-bottom: 2rem;
    animation: arcEndGlow 1.5s ease-in-out infinite alternate;
}

@keyframes arcEndGlow {
    0% {
        text-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
    }

    100% {
        text-shadow: 0 0 30px rgba(255, 215, 0, 0.8), 0 0 50px rgba(255, 165, 0, 0.4);
    }
}

.arc-end-buttons {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
}

.arc-end-btn {
    padding: 1rem 2.5rem;
    font-family: 'Orbitron', sans-serif;
    font-size: 1rem;
    font-weight: 600;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 280px;
}

.arc-end-btn.continue-btn {
    background: linear-gradient(135deg, #7c3aed, #00d4ff);
    color: white;
    box-shadow: 0 0 20px rgba(124, 58, 237, 0.4);
}

.arc-end-btn.continue-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 0 40px rgba(0, 212, 255, 0.6);
}

.arc-end-btn.arc-menu-btn {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-secondary);
    border: 2px solid rgba(255, 255, 255, 0.2);
}

.arc-end-btn.arc-menu-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border-color: var(--primary-color);
}

@media (max-width: 480px) {
    .arc-end-btn {
        min-width: 240px;
        padding: 0.8rem 2rem;
        font-size: 0.9rem;
    }
}

/* ============================================
   UI LOADER - Système de chargement d'interfaces
   ============================================ */

.ui-loader {
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.4s ease, visibility 0.4s ease;
}

.ui-loader.active {
    opacity: 1;
    visibility: visible;
}

.loader-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(10, 10, 26, 0.85);
    backdrop-filter: blur(8px);
}

.loader-content {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.5rem;
}

.loader-spinner {
    width: 60px;
    height: 60px;
    border: 4px solid rgba(0, 212, 255, 0.2);
    border-top-color: var(--primary-color, #00d4ff);
    border-radius: 50%;
    animation: loaderSpin 1s linear infinite;
}

.loader-text {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.2rem;
    color: var(--text-primary, #ffffff);
    text-transform: uppercase;
    letter-spacing: 3px;
    animation: loaderPulse 1.5s ease-in-out infinite;
}

@keyframes loaderSpin {
    to {
        transform: rotate(360deg);
    }
}

@keyframes loaderPulse {

    0%,
    100% {
        opacity: 0.5;
    }

    50% {
        opacity: 1;
    }
}

/* ============================================
   INTRO CINÉMATIQUE - Écran d'intro animé
   ============================================ */

.intro-screen {
    position: fixed;
    inset: 0;
    z-index: 10000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: #000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.8s ease, visibility 0.8s ease;
}

.intro-screen.active {
    opacity: 1;
    visibility: visible;
}

.intro-screen.fade-out {
    opacity: 0;
}

.intro-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
}

/* Logo principal */
.intro-logo {
    text-align: center;
    opacity: 0;
    transform: scale(0.8);
    filter: blur(10px);
    animation: introLogoReveal 2s ease 0.6s forwards;
}

@keyframes introLogoReveal {
    0% {
        opacity: 0;
        transform: scale(0.8);
        filter: blur(10px);
    }

    50% {
        filter: blur(2px);
    }

    100% {
        opacity: 1;
        transform: scale(1);
        filter: blur(0);
    }
}

.intro-title {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(3rem, 10vw, 6rem);
    font-weight: 900;
    color: #fff;
    text-shadow:
        0 0 20px rgba(0, 212, 255, 0.8),
        0 0 40px rgba(124, 58, 237, 0.6),
        0 0 60px rgba(0, 212, 255, 0.4);
    letter-spacing: 0.1em;
    margin-bottom: 0.5rem;
    animation: introGlitch 4s ease 2.5s;
}

.intro-subtitle {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(1rem, 3vw, 1.5rem);
    color: rgba(255, 255, 255, 0.7);
    letter-spacing: 0.3em;
    text-transform: uppercase;
}

/* Effet glitch discret */
@keyframes introGlitch {

    0%,
    100% {
        transform: translate(0);
        text-shadow:
            0 0 20px rgba(0, 212, 255, 0.8),
            0 0 40px rgba(124, 58, 237, 0.6);
    }

    2% {
        transform: translate(-3px, 1px);
        text-shadow:
            3px 0 rgba(255, 0, 100, 0.7),
            -3px 0 rgba(0, 255, 255, 0.7);
    }

    4% {
        transform: translate(0);
        text-shadow:
            0 0 20px rgba(0, 212, 255, 0.8),
            0 0 40px rgba(124, 58, 237, 0.6);
    }

    20% {
        transform: translate(2px, -1px);
        text-shadow:
            -2px 0 rgba(255, 0, 100, 0.5),
            2px 0 rgba(0, 255, 255, 0.5);
    }

    22% {
        transform: translate(0);
    }

    50% {
        transform: translate(-2px, 0);
        text-shadow:
            2px 0 rgba(255, 0, 100, 0.6),
            -2px 0 rgba(0, 255, 255, 0.6);
    }

    52% {
        transform: translate(0);
        text-shadow:
            0 0 20px rgba(0, 212, 255, 0.8),
            0 0 40px rgba(124, 58, 237, 0.6);
    }
}

/* Teaser VS */
.intro-teaser {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    opacity: 0;
    animation: introFadeIn 0.8s ease 3s forwards;
}

.teaser-line {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(1.2rem, 4vw, 2rem);
    font-weight: 700;
    color: #fff;
    opacity: 0;
}

.teaser-1 {
    color: #0078d4;
    text-shadow: 0 0 15px rgba(0, 120, 212, 0.8);
    animation: introSlideLeft 0.6s ease 3.2s forwards;
}

.teaser-vs {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.2rem;
    color: #ff4757;
    opacity: 0;
    animation: introPulseVs 0.4s ease 3.6s forwards;
}

.teaser-2 {
    color: #4285F4;
    text-shadow: 0 0 15px rgba(66, 133, 244, 0.8);
    animation: introSlideRight 0.6s ease 3.8s forwards;
}

@keyframes introFadeIn {
    to {
        opacity: 1;
    }
}

@keyframes introSlideLeft {
    from {
        opacity: 0;
        transform: translateX(-30px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes introSlideRight {
    from {
        opacity: 0;
        transform: translateX(30px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes introPulseVs {
    0% {
        opacity: 0;
        transform: scale(0.5);
    }

    50% {
        transform: scale(1.3);
    }

    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* Barre de chargement */
.intro-loading {
    width: 200px;
    height: 3px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 2px;
    overflow: hidden;
    opacity: 0;
    animation: introFadeIn 0.5s ease 4.5s forwards;
}

.intro-loading-bar {
    width: 0%;
    height: 100%;
    background: linear-gradient(90deg, #00d4ff, #7c3aed, #00d4ff);
    background-size: 200% 100%;
    border-radius: 2px;
    animation: introLoadingProgress 3s ease 4.8s forwards,
        introLoadingShimmer 1s linear infinite;
}

@keyframes introLoadingProgress {
    from {
        width: 0%;
    }

    to {
        width: 100%;
    }
}

@keyframes introLoadingShimmer {
    from {
        background-position: 200% 0;
    }

    to {
        background-position: -200% 0;
    }
}

/* Bouton Skip */
.intro-skip-btn {
    position: fixed;
    bottom: 80px;
    right: 40px;
    padding: 0.8rem 1.5rem;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.7);
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50px;
    cursor: pointer;
    opacity: 0;
    transition: all 0.3s ease;
    animation: introFadeIn 0.5s ease 1s forwards;
}

.intro-skip-btn:hover {
    color: #fff;
    background: rgba(255, 255, 255, 0.2);
    border-color: var(--primary-color, #00d4ff);
    transform: scale(1.05);
}

.intro-skip-btn:active {
    transform: scale(0.95);
}

.intro-skip-hint {
    position: fixed;
    bottom: 40px;
    right: 40px;
    font-family: 'Inter', sans-serif;
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.4);
    opacity: 0;
    animation: introFadeIn 0.5s ease 1s forwards;
}

/* Responsive */
@media (max-width: 600px) {
    .intro-teaser {
        flex-direction: column;
        gap: 0.8rem;
    }

    .intro-skip-btn,
    .intro-skip-hint {
        right: 20px;
    }

    .intro-skip-btn {
        bottom: 60px;
    }

    .intro-skip-hint {
        bottom: 30px;
    }
}

/* ============================================
   MEDIA PLAYER - Lecteur audio moderne
   ============================================ */

.media-player {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(100%);
    z-index: 1000;
    width: clamp(320px, 90vw, 450px);
    padding: 1rem 1.2rem;
    background: rgba(20, 20, 50, 0.92);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 16px;
    box-shadow:
        0 15px 40px rgba(0, 0, 0, 0.5),
        0 0 30px rgba(0, 212, 255, 0.1);
    opacity: 0;
    visibility: hidden;
    transition:
        transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
        opacity 0.3s ease,
        visibility 0.3s ease;
}

.media-player.visible {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
    visibility: visible;
}

/* Bouton fermer */
.mp-close-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 24px;
    height: 24px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.6);
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.mp-close-btn:hover {
    background: rgba(255, 71, 87, 0.3);
    color: #ff4757;
}

/* Info (titre + temps) */
.mp-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.8rem;
    padding-right: 30px;
}

.mp-title {
    font-family: 'Inter', sans-serif;
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--text-primary, #fff);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 60%;
}

.mp-time {
    font-family: 'Orbitron', monospace;
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.6);
}

.mp-separator {
    margin: 0 0.3rem;
    opacity: 0.5;
}

/* Progress bar */
.mp-progress-container {
    margin-bottom: 0.8rem;
}

.mp-progress-bar {
    position: relative;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: visible;
}

.mp-progress-fill {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--primary-color, #00d4ff), var(--secondary-color, #7c3aed));
    border-radius: 3px;
    transition: width 0.1s linear;
}

.mp-seek-slider {
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    width: 100%;
    height: 20px;
    -webkit-appearance: none;
    appearance: none;
    background: transparent;
    cursor: pointer;
    margin: 0;
}

.mp-seek-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: var(--primary-color, #00d4ff);
    box-shadow: 0 0 8px rgba(0, 212, 255, 0.5);
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.mp-progress-bar:hover .mp-seek-slider::-webkit-slider-thumb {
    opacity: 1;
}

/* Contrôles */
.mp-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.mp-btn {
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.08);
    color: var(--text-primary, #fff);
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mp-btn:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: scale(1.1);
}

.mp-btn:active {
    transform: scale(0.95);
}

.mp-play-btn {
    width: 50px;
    height: 50px;
    font-size: 1.3rem;
    background: linear-gradient(135deg, var(--primary-color, #00d4ff), var(--secondary-color, #7c3aed));
    box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
}

.mp-play-btn:hover {
    box-shadow: 0 6px 25px rgba(0, 212, 255, 0.5);
}

/* Volume */
.mp-volume-control {
    display: flex;
    align-items: center;
    gap: 0.3rem;
    margin-left: 0.5rem;
}

.mp-mute-btn {
    width: 36px;
    height: 36px;
    font-size: 0.9rem;
}

.mp-volume-slider {
    width: 60px;
    height: 4px;
    -webkit-appearance: none;
    appearance: none;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 2px;
    cursor: pointer;
}

.mp-volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--primary-color, #00d4ff);
    cursor: pointer;
}

/* Bouton toggle flottant */
.mp-toggle-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 999;
    width: 50px;
    height: 50px;
    border: none;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary-color, #00d4ff), var(--secondary-color, #7c3aed));
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(0, 212, 255, 0.4);
    transition: all 0.3s ease;
}

.mp-toggle-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 30px rgba(0, 212, 255, 0.6);
}

.mp-toggle-btn:active {
    transform: scale(0.95);
}

.mp-toggle-btn.hidden {
    opacity: 0;
    visibility: hidden;
    transform: scale(0.5);
}

/* Responsive */
@media (max-width: 500px) {
    .media-player {
        width: calc(100vw - 20px);
        bottom: 10px;
        padding: 0.8rem 1rem;
    }

    .mp-volume-slider {
        width: 40px;
    }

    .mp-toggle-btn {
        bottom: 10px;
        right: 10px;
        width: 45px;
        height: 45px;
    }
}

/* ============================================
   SECRET EVENTS - Notifications et Effets
   ============================================ */

/* Notification de secret débloqué */
.secret-notification {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(-100px);
    z-index: 20000;
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.5rem;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.95), rgba(124, 58, 237, 0.95));
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 16px;
    box-shadow:
        0 10px 40px rgba(139, 92, 246, 0.4),
        0 0 60px rgba(139, 92, 246, 0.2);
    opacity: 0;
    transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.secret-notification.visible {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
}

.secret-icon {
    font-size: 2rem;
    animation: secretIconPulse 1s ease-in-out infinite;
}

@keyframes secretIconPulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.2);
    }
}

.secret-text {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
}

.secret-label {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.7rem;
    font-weight: 700;
    color: rgba(255, 255, 255, 0.8);
    letter-spacing: 0.15em;
    text-transform: uppercase;
}

.secret-name {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.1rem;
    font-weight: 700;
    color: #fff;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
}

/* Effet Glitch pour secret idle */
.secret-glitch {
    animation: secretGlitchEffect 0.15s linear infinite;
}

@keyframes secretGlitchEffect {
    0% {
        transform: translate(0);
        filter: hue-rotate(0deg);
    }

    20% {
        transform: translate(-2px, 1px);
        filter: hue-rotate(90deg);
    }

    40% {
        transform: translate(2px, -1px);
        filter: hue-rotate(180deg);
    }

    60% {
        transform: translate(-1px, 2px);
        filter: hue-rotate(270deg);
    }

    80% {
        transform: translate(1px, -2px);
        filter: hue-rotate(360deg);
    }

    100% {
        transform: translate(0);
        filter: hue-rotate(0deg);
    }
}

/* Effet Spin pour secret logo */
.secret-spin {
    animation: secretSpinEffect 0.5s ease-in-out 6;
}

@keyframes secretSpinEffect {
    0% {
        transform: rotate(0deg) scale(1);
    }

    50% {
        transform: rotate(180deg) scale(1.2);
    }

    100% {
        transform: rotate(360deg) scale(1);
    }
}

/* Responsive */
@media (max-width: 500px) {
    .secret-notification {
        left: 10px;
        right: 10px;
        transform: translateY(-100px);
        width: auto;
    }

    .secret-notification.visible {
        transform: translateY(0);
    }
}

/* ============================================
   CHARACTER AURA SYSTEM - Auras visuelles
   ============================================ */

/* Base de l'aura */
.character-slot[data-aura]::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 180%;
    height: 180%;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.5s ease;
}

.character-slot[data-aura].visible::before {
    opacity: 1;
}

/* ========== AURAS PAR PERSONNAGE ========== */

/* Windows 11 - Aura bleue stable */
.character-slot[data-aura="win11"]::before {
    background: radial-gradient(ellipse at center,
            rgba(0, 120, 212, 0.5) 0%,
            rgba(0, 120, 212, 0.2) 40%,
            transparent 70%);
    animation: auraWin11Pulse 3s ease-in-out infinite;
}

@keyframes auraWin11Pulse {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.8;
    }

    50% {
        transform: translate(-50%, -50%) scale(1.1);
        opacity: 1;
    }
}

/* Windows 10 - Aura bleue royale */
.character-slot[data-aura="win10"]::before {
    background: radial-gradient(ellipse at center,
            rgba(0, 120, 212, 0.6) 0%,
            rgba(0, 78, 152, 0.3) 40%,
            transparent 70%);
    animation: auraWin10Pulse 2.5s ease-in-out infinite;
}

@keyframes auraWin10Pulse {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.15);
    }
}

/* Windows XP - Aura dorée légendaire */
.character-slot[data-aura="xp"]::before {
    background: radial-gradient(ellipse at center,
            rgba(255, 140, 0, 0.6) 0%,
            rgba(255, 200, 0, 0.3) 40%,
            transparent 70%);
    animation: auraXpPulse 2s ease-in-out infinite;
}

@keyframes auraXpPulse {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
        filter: brightness(1);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.2);
        filter: brightness(1.3);
    }
}

/* Windows 7 - Aura cyan royale */
.character-slot[data-aura="win7"]::before {
    background: radial-gradient(ellipse at center,
            rgba(0, 168, 232, 0.5) 0%,
            rgba(0, 168, 232, 0.2) 40%,
            transparent 70%);
    animation: auraWin7Pulse 2.8s ease-in-out infinite;
}

@keyframes auraWin7Pulse {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.1);
    }
}

/* Vista - Aura verte douce */
.character-slot[data-aura="vista"]::before {
    background: radial-gradient(ellipse at center,
            rgba(0, 204, 106, 0.5) 0%,
            rgba(0, 180, 90, 0.2) 40%,
            transparent 70%);
    animation: auraVistaPulse 3s ease-in-out infinite;
}

@keyframes auraVistaPulse {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.08);
    }
}

/* ChromeOS - Aura noire glitch malveillante */
.character-slot[data-aura="chromeos"]::before {
    background: radial-gradient(ellipse at center,
            rgba(66, 133, 244, 0.4) 0%,
            rgba(234, 67, 53, 0.3) 25%,
            rgba(0, 0, 0, 0.6) 50%,
            transparent 70%);
    animation: auraChromeGlitch 0.5s steps(2) infinite;
}

@keyframes auraChromeGlitch {
    0% {
        transform: translate(-50%, -50%) scale(1);
        filter: hue-rotate(0deg);
    }

    25% {
        transform: translate(-52%, -48%) scale(1.05);
        filter: hue-rotate(90deg);
    }

    50% {
        transform: translate(-48%, -52%) scale(0.98);
        filter: hue-rotate(180deg);
    }

    75% {
        transform: translate(-51%, -49%) scale(1.02);
        filter: hue-rotate(270deg);
    }

    100% {
        transform: translate(-50%, -50%) scale(1);
        filter: hue-rotate(360deg);
    }
}

/* Kernel - Lumière blanche sacrée divine */
.character-slot[data-aura="kernel"]::before {
    background: radial-gradient(ellipse at center,
            rgba(255, 255, 255, 0.9) 0%,
            rgba(246, 211, 101, 0.5) 30%,
            rgba(255, 255, 255, 0.2) 50%,
            transparent 70%);
    animation: auraKernelDivine 2s ease-in-out infinite;
}

.character-slot[data-aura="kernel"]::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 250%;
    height: 250%;
    transform: translate(-50%, -50%);
    background: radial-gradient(ellipse at center,
            rgba(255, 255, 255, 0.3) 0%,
            transparent 50%);
    z-index: -2;
    animation: auraKernelOuter 3s ease-in-out infinite;
}

@keyframes auraKernelDivine {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
        filter: brightness(1);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.2);
        filter: brightness(1.5);
    }
}

@keyframes auraKernelOuter {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        opacity: 0.5;
    }

    50% {
        transform: translate(-50%, -50%) scale(1.3) rotate(180deg);
        opacity: 0.8;
    }
}

/* macOS - Aura violette élégante */
.character-slot[data-aura="macos"]::before {
    background: radial-gradient(ellipse at center,
            rgba(168, 85, 247, 0.5) 0%,
            rgba(168, 85, 247, 0.2) 40%,
            transparent 70%);
    animation: auraMacPulse 2.5s ease-in-out infinite;
}

@keyframes auraMacPulse {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.12);
    }
}

/* Ubuntu - Aura orange chaleureuse */
.character-slot[data-aura="ubuntu"]::before {
    background: radial-gradient(ellipse at center,
            rgba(233, 84, 32, 0.5) 0%,
            rgba(233, 84, 32, 0.2) 40%,
            transparent 70%);
    animation: auraUbuntuPulse 2.5s ease-in-out infinite;
}

@keyframes auraUbuntuPulse {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.1);
    }
}

/* ========== AURAS PAR ÉMOTION ========== */

/* Émotion : Colère */
.character-slot[data-aura-emotion="angry"]::before {
    background: radial-gradient(ellipse at center,
            rgba(255, 0, 0, 0.6) 0%,
            rgba(200, 0, 0, 0.3) 40%,
            transparent 70%) !important;
    animation: auraAngryPulse 0.3s ease-in-out infinite !important;
}

@keyframes auraAngryPulse {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.15);
    }
}

/* Émotion : Triste */
.character-slot[data-aura-emotion="sad"]::before {
    background: radial-gradient(ellipse at center,
            rgba(100, 100, 200, 0.4) 0%,
            rgba(50, 50, 150, 0.2) 40%,
            transparent 70%) !important;
    animation: auraSadPulse 4s ease-in-out infinite !important;
}

@keyframes auraSadPulse {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(0.95);
        opacity: 0.6;
    }

    50% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.8;
    }
}

/* Émotion : Puissance */
.character-slot[data-aura-emotion="power"]::before {
    background: radial-gradient(ellipse at center,
            rgba(255, 215, 0, 0.7) 0%,
            rgba(255, 165, 0, 0.4) 40%,
            transparent 70%) !important;
    animation: auraPowerPulse 0.5s ease-in-out infinite !important;
}

@keyframes auraPowerPulse {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
        filter: brightness(1);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.3);
        filter: brightness(1.5);
    }
}

/* Émotion : Peur */
.character-slot[data-aura-emotion="fear"]::before {
    background: radial-gradient(ellipse at center,
            rgba(100, 0, 100, 0.5) 0%,
            rgba(50, 0, 50, 0.3) 40%,
            transparent 70%) !important;
    animation: auraFearPulse 0.2s steps(3) infinite !important;
}

@keyframes auraFearPulse {
    0% {
        transform: translate(-50%, -50%) scale(0.98);
    }

    50% {
        transform: translate(-51%, -49%) scale(1.02);
    }

    100% {
        transform: translate(-49%, -51%) scale(1);
    }
}

/* Émotion : Mort / Fantôme */
.character-slot[data-aura-emotion="ghost"]::before {
    background: radial-gradient(ellipse at center,
            rgba(200, 200, 200, 0.3) 0%,
            rgba(150, 150, 150, 0.15) 40%,
            transparent 70%) !important;
    animation: auraGhostFloat 3s ease-in-out infinite !important;
}

@keyframes auraGhostFloat {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.5;
    }

    50% {
        transform: translate(-50%, -55%) scale(1.1);
        opacity: 0.8;
    }
}

/* ============================================
   TIMELINE INTERACTIVE - Historique des arcs
   ============================================ */

.timeline-modal {
    position: fixed;
    inset: 0;
    z-index: 15000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.4s ease;
}

.timeline-modal.open {
    opacity: 1;
    visibility: visible;
}

.timeline-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(10px);
}

.timeline-container {
    position: relative;
    width: 95%;
    max-width: 1200px;
    max-height: 85vh;
    padding: 2rem;
    background: linear-gradient(135deg, rgba(20, 20, 50, 0.95), rgba(10, 10, 30, 0.98));
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    box-shadow:
        0 20px 60px rgba(0, 0, 0, 0.5),
        0 0 40px rgba(0, 212, 255, 0.1);
    transform: scale(0.9) translateY(20px);
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    overflow: hidden;
}

.timeline-modal.open .timeline-container {
    transform: scale(1) translateY(0);
    opacity: 1;
}

.timeline-close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.7);
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.timeline-close-btn:hover {
    background: rgba(255, 71, 87, 0.3);
    color: #ff4757;
}

.timeline-title {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(1.5rem, 4vw, 2rem);
    font-weight: 700;
    color: var(--text-primary);
    text-align: center;
    margin-bottom: 0.5rem;
}

.timeline-subtitle {
    font-family: 'Inter', sans-serif;
    font-size: 0.9rem;
    color: var(--text-secondary);
    text-align: center;
    margin-bottom: 2rem;
}

/* Zone de scroll horizontal */
.timeline-content {
    display: flex;
    gap: 2rem;
    padding: 1rem 0.5rem 2rem;
    overflow-x: auto;
    overflow-y: hidden;
    scroll-behavior: smooth;
    scrollbar-width: thin;
    scrollbar-color: var(--primary-color) rgba(255, 255, 255, 0.1);
}

.timeline-content::-webkit-scrollbar {
    height: 8px;
}

.timeline-content::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 4px;
}

.timeline-content::-webkit-scrollbar-thumb {
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    border-radius: 4px;
}

/* ============================================
   CARNET D'OASIS - Journal des répliques
   ============================================ */

.memory-modal {
    position: fixed;
    inset: 0;
    z-index: 15000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.35s ease;
}

.memory-modal.open {
    opacity: 1;
    visibility: visible;
}

.memory-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(10px);
}

.memory-container {
    position: relative;
    width: min(90vw, 820px);
    max-height: 85vh;
    padding: clamp(1.5rem, 4vw, 2.5rem);
    background: linear-gradient(135deg, rgba(18, 26, 50, 0.96), rgba(10, 14, 30, 0.98));
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 20px;
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.45), 0 0 40px rgba(255, 212, 128, 0.15);
    transform: translateY(20px) scale(0.95);
    opacity: 0;
    transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
    overflow: hidden;
}

.memory-modal.open .memory-container {
    transform: translateY(0) scale(1);
    opacity: 1;
}

.memory-close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.12);
    color: rgba(255, 255, 255, 0.8);
    font-size: 1.4rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.memory-close-btn:hover {
    background: rgba(255, 186, 120, 0.3);
    color: #ffd2a6;
}

.memory-title {
    font-family: 'Orbitron', sans-serif;
    text-align: center;
    font-size: clamp(1.4rem, 3.8vw, 2rem);
    margin-bottom: 0.4rem;
}

.memory-subtitle {
    text-align: center;
    color: var(--text-secondary);
    font-size: 0.95rem;
    margin-bottom: 1.8rem;
}

.memory-content {
    display: grid;
    gap: 1rem;
    max-height: 52vh;
    overflow-y: auto;
    padding-right: 0.5rem;
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 212, 128, 0.5) rgba(255, 255, 255, 0.08);
}

.memory-content::-webkit-scrollbar {
    width: 6px;
}

.memory-content::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 4px;
}

.memory-content::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, rgba(255, 212, 128, 0.7), rgba(255, 161, 120, 0.6));
    border-radius: 4px;
}

.memory-entry {
    display: grid;
    gap: 0.4rem;
    padding: 0.9rem 1rem;
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 14px;
}

.memory-entry-header {
    display: flex;
    justify-content: space-between;
    gap: 1rem;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.memory-entry-speaker {
    font-weight: 600;
    color: var(--text-primary);
}

.memory-entry-text {
    font-size: 0.95rem;
    line-height: 1.5;
    color: var(--text-primary);
}

.memory-empty {
    text-align: center;
    padding: 2rem 1rem;
    color: var(--text-secondary);
    border: 1px dashed rgba(255, 255, 255, 0.2);
    border-radius: 16px;
}

.memory-actions {
    display: flex;
    justify-content: center;
    margin-top: 1.5rem;
}

.memory-clear-btn {
    min-width: 160px;
}

@media (max-width: 768px) {
    .memory-container {
        width: 92vw;
        max-height: 90vh;
    }

    .memory-content {
        max-height: 50vh;
    }
}

/* Arc (groupe de chapitres) */
.timeline-arc {
    flex-shrink: 0;
    width: 280px;
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    transition: all 0.3s ease;
}

.timeline-arc:hover {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.15);
}

.arc-header {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    margin-bottom: 1rem;
    padding-bottom: 0.8rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.arc-icon {
    font-size: 1.8rem;
}

.arc-info {
    flex: 1;
}

.arc-name {
    font-family: 'Orbitron', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-primary);
}

.arc-desc {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.arc-progress {
    font-family: 'Orbitron', monospace;
    font-size: 0.7rem;
    color: var(--primary-color);
}

/* Chapitres dans un arc */
.arc-chapters {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
}

.timeline-chapter {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.8rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid transparent;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.timeline-chapter:hover:not(.locked) {
    background: rgba(255, 255, 255, 0.08);
    border-color: var(--primary-color);
    transform: translateX(5px);
}

.timeline-chapter.locked {
    opacity: 0.5;
    cursor: not-allowed;
}

.chapter-status {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    flex-shrink: 0;
}

.chapter-status.completed {
    background: linear-gradient(135deg, #10b981, #059669);
    box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
}

.chapter-status.current {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
    animation: chapterPulse 1.5s ease-in-out infinite;
}

@keyframes chapterPulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.3);
    }
}

.chapter-status.locked {
    background: rgba(100, 100, 120, 0.5);
    border: 1px dashed rgba(255, 255, 255, 0.3);
}

.chapter-status.secret {
    background: linear-gradient(135deg, #8b5cf6, #a855f7);
    box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
}

.chapter-info {
    flex: 1;
    min-width: 0;
}

.chapter-name {
    font-family: 'Inter', sans-serif;
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.chapter-details {
    font-size: 0.7rem;
    color: var(--text-secondary);
}

/* Personnages morts */
.chapter-deaths {
    display: flex;
    gap: 0.3rem;
}

.death-icon {
    font-size: 0.8rem;
    opacity: 0.7;
}

/* Légende */
.timeline-legend {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

.legend-dot.completed {
    background: #10b981;
}

.legend-dot.current {
    background: var(--primary-color);
}

.legend-dot.locked {
    background: rgba(100, 100, 120, 0.5);
    border: 1px dashed rgba(255, 255, 255, 0.3);
}

.legend-dot.secret {
    background: #8b5cf6;
}

/* Responsive */
@media (max-width: 768px) {
    .timeline-container {
        width: 100%;
        max-height: 90vh;
        border-radius: 0;
        padding: 1.5rem 1rem;
    }

    .timeline-arc {
        width: 250px;
    }

    .timeline-legend {
        flex-wrap: wrap;
        gap: 1rem;
    }
}

/* ============================================
   MENTAL STATE - Effets visuels dynamiques
   ============================================ */

/* Variables dynamiques d'état mental */
:root {
    --mental-color: #00d4ff;
}

/* Shake niveau 1 (Doute) */
.mental-shake-1 {
    animation: mentalShake1 0.5s linear infinite;
}

@keyframes mentalShake1 {

    0%,
    100% {
        transform: translateX(0);
    }

    25% {
        transform: translateX(-1px);
    }

    75% {
        transform: translateX(1px);
    }
}

/* Shake niveau 2 (Peur) */
.mental-shake-2 {
    animation: mentalShake2 0.3s linear infinite;
}

@keyframes mentalShake2 {

    0%,
    100% {
        transform: translate(0);
    }

    20% {
        transform: translate(-2px, 1px);
    }

    40% {
        transform: translate(1px, -1px);
    }

    60% {
        transform: translate(-1px, 2px);
    }

    80% {
        transform: translate(2px, -1px);
    }
}

/* Shake niveau 3 (Corruption) */
.mental-shake-3 {
    animation: mentalShake3 0.15s linear infinite;
}

@keyframes mentalShake3 {

    0%,
    100% {
        transform: translate(0) skewX(0);
    }

    25% {
        transform: translate(-3px, 1px) skewX(-1deg);
    }

    50% {
        transform: translate(2px, -2px) skewX(1deg);
    }

    75% {
        transform: translate(-1px, 2px) skewX(-0.5deg);
    }
}

/* Corruption - Effet glitch permanent */
.mental-corrupted {
    position: relative;
}

.mental-corrupted::after {
    content: '';
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(0deg,
            rgba(255, 0, 0, 0.03) 0px,
            rgba(255, 0, 0, 0.03) 1px,
            transparent 1px,
            transparent 2px);
    pointer-events: none;
    z-index: 99999;
    animation: corruptionScanlines 0.1s steps(3) infinite;
}

@keyframes corruptionScanlines {
    0% {
        transform: translateY(0);
    }

    100% {
        transform: translateY(4px);
    }
}

/* États par data-attribute */
[data-mental-state="calm"] {
    --primary-color: #00d4ff;
}

[data-mental-state="doubt"] {
    --primary-color: #fbbf24;
}

[data-mental-state="fear"] {
    --primary-color: #a855f7;
}

[data-mental-state="corruption"] {
    --primary-color: #ef4444;
}

/* Dialogue box adaptatif */
[data-mental-state="corruption"] .dialogue-box {
    border-color: rgba(239, 68, 68, 0.5);
    box-shadow: 0 0 30px rgba(239, 68, 68, 0.3);
}

[data-mental-state="fear"] .dialogue-box {
    border-color: rgba(168, 85, 247, 0.5);
    box-shadow: 0 0 30px rgba(168, 85, 247, 0.3);
}

/* Texte glitché */
border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

.legend-dot.completed {
    background: #10b981;
}

.legend-dot.current {
    background: var(--primary-color);
}

.legend-dot.locked {
    background: rgba(100, 100, 120, 0.5);
    border: 1px dashed rgba(255, 255, 255, 0.3);
}

.legend-dot.secret {
    background: #8b5cf6;
}

/* Responsive */
@media (max-width: 768px) {
    .timeline-container {
        width: 100%;
        max-height: 90vh;
        border-radius: 0;
        padding: 1.5rem 1rem;
    }

    .timeline-arc {
        width: 250px;
    }

    .timeline-legend {
        flex-wrap: wrap;
        gap: 1rem;
    }
}

/* ============================================
   MENTAL STATE - Effets visuels dynamiques
   ============================================ */

/* Variables dynamiques d'état mental */
:root {
    --mental-color: #00d4ff;
}

/* Shake niveau 1 (Doute) */
.mental-shake-1 {
    animation: mentalShake1 0.5s linear infinite;
}

@keyframes mentalShake1 {

    0%,
    100% {
        transform: translateX(0);
    }

    25% {
        transform: translateX(-1px);
    }

    75% {
        transform: translateX(1px);
    }
}

/* Shake niveau 2 (Peur) */
.mental-shake-2 {
    animation: mentalShake2 0.3s linear infinite;
}

@keyframes mentalShake2 {

    0%,
    100% {
        transform: translate(0);
    }

    20% {
        transform: translate(-2px, 1px);
    }

    40% {
        transform: translate(1px, -1px);
    }

    60% {
        transform: translate(-1px, 2px);
    }

    80% {
        transform: translate(2px, -1px);
    }
}

/* Shake niveau 3 (Corruption) */
.mental-shake-3 {
    animation: mentalShake3 0.15s linear infinite;
}

@keyframes mentalShake3 {

    0%,
    100% {
        transform: translate(0) skewX(0);
    }

    25% {
        transform: translate(-3px, 1px) skewX(-1deg);
    }

    50% {
        transform: translate(2px, -2px) skewX(1deg);
    }

    75% {
        transform: translate(-1px, 2px) skewX(-0.5deg);
    }
}

/* Corruption - Effet glitch permanent */
.mental-corrupted {
    position: relative;
}

.mental-corrupted::after {
    content: '';
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(0deg,
            rgba(255, 0, 0, 0.03) 0px,
            rgba(255, 0, 0, 0.03) 1px,
            transparent 1px,
            transparent 2px);
    pointer-events: none;
    z-index: 99999;
    animation: corruptionScanlines 0.1s steps(3) infinite;
}

@keyframes corruptionScanlines {
    0% {
        transform: translateY(0);
    }

    100% {
        transform: translateY(4px);
    }
}

/* États par data-attribute */
[data-mental-state="calm"] {
    --primary-color: #00d4ff;
}

[data-mental-state="doubt"] {
    --primary-color: #fbbf24;
}

[data-mental-state="fear"] {
    --primary-color: #a855f7;
}

[data-mental-state="corruption"] {
    --primary-color: #ef4444;
}

/* Dialogue box adaptatif */
[data-mental-state="corruption"] .dialogue-box {
    border-color: rgba(239, 68, 68, 0.5);
    box-shadow: 0 0 30px rgba(239, 68, 68, 0.3);
}

[data-mental-state="fear"] .dialogue-box {
    border-color: rgba(168, 85, 247, 0.5);
    box-shadow: 0 0 30px rgba(168, 85, 247, 0.3);
}

/* Texte glitché */
.text-corrupted {
    position: relative;
    animation: textGlitch 0.3s steps(2) infinite;
}

@keyframes textGlitch {

    0%,
    100% {
        text-shadow: none;
        transform: translateX(0);
    }

    50% {
        text-shadow:
            2px 0 #ff0000,
            -2px 0 #00ffff;
        transform: translateX(1px);
    }
}

/* ============================================
   NARRATOR AI STYLES - Styles du Narrateur IA
   ============================================ */

/* Le Narrateur par défaut (Calm) */
.narrator-calm {
    font-family: 'Inter', sans-serif;
    color: #a0a0c0;
    /* Gris bleuté doux */
    font-style: italic;
    border-left: 3px solid #a0a0c0;
    padding-left: 1rem;
}

/* Le Narrateur Épique (Héroïque/Divin) */
.narrator-epic {
    font-family: 'Orbitron', sans-serif;
    color: #f6d365;
    /* Or */
    text-shadow: 0 0 10px rgba(246, 211, 101, 0.5);
    font-weight: 700;
    border-left: 3px solid #f6d365;
    padding-left: 1rem;
    animation: epicPulse 3s ease-in-out infinite;
}

@keyframes epicPulse {

    0%,
    100% {
        text-shadow: 0 0 10px rgba(246, 211, 101, 0.5);
    }

    50% {
        text-shadow: 0 0 20px rgba(246, 211, 101, 0.8), 0 0 5px white;
    }
}

/* Le Narrateur Sombre (Corruption/Danger) */
.narrator-dark {
    font-family: 'Courier New', monospace;
    color: #ff4444;
    /* Rouge sang */
    text-shadow: 2px 0 0 rgba(0, 0, 0, 0.8);
    border-left: 3px solid #ff4444;
    padding-left: 1rem;
    position: relative;
    letter-spacing: 0.05em;
}

.narrator-dark::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 0, 0, 0.05);
    pointer-events: none;
    z-index: -1;
}

/* Le Narrateur Ironique (Moqueur/Méta) */
.narrator-ironic {
    font-family: 'Consolas', 'Monaco', monospace;
    color: #00ffaa;
    /* Vert terminal/Matrix */
    text-shadow: 0 0 5px #00ffaa;
    border-left: 3px solid #00ffaa;
    padding-left: 1rem;
}

.narrator-ironic::after {
    content: ' [Observation IA]';
    font-size: 0.7em;
    opacity: 0.7;
    vertical-align: super;
}

/* ============================================
   CHARACTER LIFECYCLE - États des personnages
   ============================================ */

/* VIVANT (Défaut) */
.char-status-alive {
    filter: none;
    opacity: 1;
    transform: scale(1);
    transition: all 0.5s ease;
}

/* MORT (Grisé, fantomatique static) */
.char-status-dead {
    filter: grayscale(100%) brightness(0.6) contrast(1.2);
    opacity: 0.7;
    transform: scale(0.95);
    transition: all 1s ease;
}

/* FANTÔME (Autre Monde, éthéré) */
.char-status-ghost {
    filter: grayscale(100%) brightness(1.2) drop-shadow(0 0 10px rgba(0, 200, 255, 0.6));
    opacity: 0.85;
    animation: ghostFloat 3s ease-in-out infinite alternate;
    mix-blend-mode: screen;
    /* Donne un effet lumineux spectral */
}

@keyframes ghostFloat {
    0% {
        transform: translateY(0) scale(1);
    }

    100% {
        transform: translateY(-10px) scale(1.02);
    }
}

/* RESSUSCITÉ (Retour héroïque, aura dorée) */
.char-status-resurrected {
    filter: brightness(1.1) drop-shadow(0 0 15px rgba(255, 215, 0, 0.8));
    animation: resurrectGlow 2s infinite alternate;
}

@keyframes resurrectGlow {
    0% {
        filter: brightness(1.1) drop-shadow(0 0 15px rgba(255, 215, 0, 0.6));
    }

    100% {
        filter: brightness(1.3) drop-shadow(0 0 25px rgba(255, 215, 0, 1));
    }
}

/* CORROMPU (Glitché, instable) */
.char-status-corrupted {
    filter: hue-rotate(-50deg) contrast(1.5) saturate(2);
    animation: corruptionGlitch 0.2s infinite;
}

@keyframes corruptionGlitch {
    0% {
        transform: translate(0, 0) skew(0deg);
        opacity: 1;
    }

    20% {
        transform: translate(-2px, 2px) skew(-5deg);
        opacity: 0.9;
    }

    40% {
        transform: translate(2px, -2px) skew(5deg);
        opacity: 1;
    }

    60% {
        transform: translate(-2px, -2px) skew(-2deg);
        opacity: 0.8;
    }

    80% {
        transform: translate(2px, 2px) skew(2deg);
        opacity: 1;
    }

    100% {
        transform: translate(0, 0) skew(0deg);
        opacity: 1;
    }
}


/* ============================================
   THEME: AUTRE MONDE (L'Au-delà)
   ============================================ */

.theme-other-world {
    --primary-color: #22d3ee;
    /* Cyan fantomatique */
    --secondary-color: #0e7490;
    /* Cyan plus sombre */
    --bg-color: rgba(0, 20, 40, 0.95);
    --text-color: #a5f3fc;
    --glow-color: rgba(34, 211, 238, 0.5);
}

/* Fond général - brume éthérée */
.theme-other-world #app {
    background: radial-gradient(ellipse at center, rgba(10, 30, 60, 0.9) 0%, rgba(0, 10, 20, 1) 100%);
    animation: otherWorldBg 10s ease-in-out infinite alternate;
}

@keyframes otherWorldBg {
    0% {
        filter: hue-rotate(0deg) brightness(1);
    }

    100% {
        filter: hue-rotate(10deg) brightness(0.9);
    }
}

/* Dialogue Box - Style cristallin fantôme */
.theme-other-world .dialogue-box {
    background: linear-gradient(135deg, rgba(10, 50, 80, 0.7), rgba(0, 30, 50, 0.85)) !important;
    border: 1px solid rgba(34, 211, 238, 0.4) !important;
    box-shadow:
        0 0 20px rgba(34, 211, 238, 0.2),
        inset 0 0 30px rgba(34, 211, 238, 0.1) !important;
    backdrop-filter: blur(10px);
}

/* Texte instable - effet d'écho */
.theme-other-world .dialogue-text {
    color: #a5f3fc !important;
    text-shadow:
        0 0 5px rgba(34, 211, 238, 0.8),
        2px 2px 4px rgba(0, 0, 0, 0.5);
    animation: textInstability 4s ease-in-out infinite;
}

@keyframes textInstability {

    0%,
    100% {
        transform: translateX(0) skewX(0deg);
        opacity: 1;
        filter: blur(0px);
    }

    25% {
        transform: translateX(-1px) skewX(-0.5deg);
        opacity: 0.95;
        filter: blur(0.3px);
    }

    50% {
        transform: translateX(1px) skewX(0.5deg);
        opacity: 0.9;
        filter: blur(0.5px);
    }

    75% {
        transform: translateX(-0.5px) skewX(-0.3deg);
        opacity: 0.95;
        filter: blur(0.2px);
    }
}

/* Nom du personnage - aura spectrale */
.theme-other-world .speaker-name {
    background: linear-gradient(135deg, #0891b2, #22d3ee) !important;
    text-shadow: 0 0 10px rgba(34, 211, 238, 0.8);
    animation: ghostPulse 3s ease-in-out infinite;
}

@keyframes ghostPulse {

    0%,
    100% {
        box-shadow: 0 0 10px rgba(34, 211, 238, 0.5);
    }

    50% {
        box-shadow: 0 0 25px rgba(34, 211, 238, 0.8), 0 0 50px rgba(34, 211, 238, 0.3);
    }
}

/* Personnages - effet fantomatique */
.theme-other-world .character-slot img {
    filter: brightness(1.1) drop-shadow(0 0 15px rgba(34, 211, 238, 0.6));
    animation: charFloat 5s ease-in-out infinite alternate;
}

@keyframes charFloat {
    0% {
        transform: translateY(0);
    }

    100% {
        transform: translateY(-8px);
    }
}

/* Indicateur de continuation - pulsation spectrale */
.theme-other-world .continue-indicator {
    color: #22d3ee;
    animation: ghostBlink 2s infinite;
}

@keyframes ghostBlink {

    0%,
    100% {
        opacity: 0.3;
    }

    50% {
        opacity: 1;
        text-shadow: 0 0 10px #22d3ee;
    }
}

/* Effet de brume en overlay */
.theme-other-world::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        radial-gradient(ellipse at 20% 30%, rgba(34, 211, 238, 0.05) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 70%, rgba(8, 145, 178, 0.05) 0%, transparent 50%);
    pointer-events: none;
    z-index: 1000;
    animation: mistDrift 15s ease-in-out infinite alternate;
}

@keyframes mistDrift {
    0% {
        opacity: 0.5;
        transform: translateX(0);
    }

    100% {
        opacity: 0.8;
        transform: translateX(20px);
    }
}


/* ============================================
   MENU DYNAMIQUE - Personnages sur l'écran titre
   ============================================ */

.menu-characters {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 40%;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
}

.menu-char {
    height: 80%;
    max-height: 350px;
    object-fit: contain;
    opacity: 0.8;
    filter: drop-shadow(0 0 20px rgba(0, 150, 255, 0.3));
    transition: all 0.5s ease;
    animation: menuCharFloat 4s ease-in-out infinite alternate;
}

.menu-char.left {
    transform: translateX(-20%);
}

.menu-char.right {
    transform: translateX(20%);
}

.menu-char.center {
    transform: translateY(5%);
}

@keyframes menuCharFloat {
    0% {
        transform: translateY(0);
    }

    100% {
        transform: translateY(-10px);
    }
}

/* Arc 2 - Style sombre */
.menu-arc2 .menu-char {
    filter: drop-shadow(0 0 20px rgba(255, 100, 0, 0.4)) brightness(0.9);
}

/* Arc 3 - Style fantomatique */
.menu-arc3 .menu-char {
    filter: grayscale(80%) drop-shadow(0 0 25px rgba(100, 200, 255, 0.6));
    opacity: 0.6;
}

/* Arc 4 - Style futuriste */
.menu-arc4 .menu-char {
    filter: drop-shadow(0 0 30px rgba(0, 255, 170, 0.5)) saturate(1.2);
}

/* Arc 5 - Style libre */
.menu-arc5 .menu-char {
    filter: drop-shadow(0 0 20px rgba(229, 148, 32, 0.5));
}

/* ============================================
   COMBAT AURAS - Effets d'aura pendant les combats
   ============================================ */

/* ========== WINDOWS 11 - Lumière Bleue Stable ========== */
.character-slot.combat-aura-win11 {
    position: relative;
}

.character-slot.combat-aura-win11::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 200%;
    height: 200%;
    transform: translate(-50%, -50%);
    background: radial-gradient(ellipse at center,
            rgba(0, 150, 255, 0.6) 0%,
            rgba(0, 100, 200, 0.4) 30%,
            rgba(0, 50, 150, 0.2) 50%,
            transparent 70%);
    z-index: -1;
    pointer-events: none;
    animation: combatAuraWin11 2s ease-in-out infinite;
}

/* Cercles concentriques stables */
.character-slot.combat-aura-win11::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 180%;
    height: 180%;
    transform: translate(-50%, -50%);
    border: 2px solid rgba(0, 180, 255, 0.4);
    border-radius: 50%;
    z-index: -2;
    pointer-events: none;
    animation: combatAuraWin11Ring 3s ease-in-out infinite;
    box-shadow:
        0 0 20px rgba(0, 150, 255, 0.5),
        inset 0 0 30px rgba(0, 100, 200, 0.3);
}

@keyframes combatAuraWin11 {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.8;
        filter: brightness(1);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.1);
        opacity: 1;
        filter: brightness(1.2);
    }
}

@keyframes combatAuraWin11Ring {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.5;
        border-color: rgba(0, 150, 255, 0.4);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.15);
        opacity: 0.8;
        border-color: rgba(0, 200, 255, 0.6);
    }
}

/* Particules flottantes autour */
.character-slot.combat-aura-win11 .character-sprite {
    filter: drop-shadow(0 0 15px rgba(0, 150, 255, 0.8)) drop-shadow(0 0 30px rgba(0, 100, 200, 0.5)) brightness(1.1);
    animation: combatAuraWin11Sprite 2s ease-in-out infinite;
}

@keyframes combatAuraWin11Sprite {

    0%,
    100% {
        filter: drop-shadow(0 0 15px rgba(0, 150, 255, 0.8)) drop-shadow(0 0 30px rgba(0, 100, 200, 0.5)) brightness(1.1);
    }

    50% {
        filter: drop-shadow(0 0 25px rgba(0, 180, 255, 1)) drop-shadow(0 0 50px rgba(0, 120, 220, 0.7)) brightness(1.2);
    }
}

/* ========== CHROMEOS - Glitch Agressif ========== */
.character-slot.combat-aura-chromeos {
    position: relative;
}

.character-slot.combat-aura-chromeos::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 200%;
    height: 200%;
    transform: translate(-50%, -50%);
    background: radial-gradient(ellipse at center,
            rgba(234, 67, 53, 0.5) 0%,
            rgba(66, 133, 244, 0.4) 25%,
            rgba(251, 188, 4, 0.3) 50%,
            rgba(52, 168, 83, 0.2) 65%,
            transparent 80%);
    z-index: -1;
    pointer-events: none;
    animation: combatAuraChromeGlitch 0.15s steps(3) infinite;
}

/* Effet de distorsion glitch */
.character-slot.combat-aura-chromeos::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 190%;
    height: 190%;
    transform: translate(-50%, -50%);
    background:
        repeating-linear-gradient(0deg,
            transparent,
            transparent 2px,
            rgba(234, 67, 53, 0.1) 2px,
            rgba(234, 67, 53, 0.1) 4px);
    z-index: -2;
    pointer-events: none;
    animation: combatAuraChromeLines 0.1s steps(2) infinite;
    mix-blend-mode: overlay;
}

@keyframes combatAuraChromeGlitch {
    0% {
        transform: translate(-50%, -50%) scale(1) skewX(0deg);
        filter: hue-rotate(0deg);
        opacity: 0.8;
    }

    33% {
        transform: translate(-52%, -48%) scale(1.05) skewX(3deg);
        filter: hue-rotate(90deg);
        opacity: 0.9;
    }

    66% {
        transform: translate(-48%, -52%) scale(0.98) skewX(-3deg);
        filter: hue-rotate(180deg);
        opacity: 0.7;
    }

    100% {
        transform: translate(-50%, -50%) scale(1.02) skewX(0deg);
        filter: hue-rotate(270deg);
        opacity: 0.85;
    }
}

@keyframes combatAuraChromeLines {
    0% {
        background-position: 0 0;
        opacity: 0.5;
    }

    50% {
        background-position: 0 5px;
        opacity: 0.8;
    }

    100% {
        background-position: 0 -3px;
        opacity: 0.4;
    }
}

/* Sprite Chrome avec effet de bug visuel */
.character-slot.combat-aura-chromeos .character-sprite {
    filter:
        drop-shadow(-3px 0 0 rgba(234, 67, 53, 0.7)) drop-shadow(3px 0 0 rgba(66, 133, 244, 0.7)) drop-shadow(0 -3px 0 rgba(251, 188, 4, 0.5)) drop-shadow(0 3px 0 rgba(52, 168, 83, 0.5)) brightness(0.9);
    animation: combatAuraChromeSprite 0.2s steps(4) infinite;
}

@keyframes combatAuraChromeSprite {
    0% {
        transform: translateX(0) skewX(0deg);
        filter:
            drop-shadow(-3px 0 0 rgba(234, 67, 53, 0.7)) drop-shadow(3px 0 0 rgba(66, 133, 244, 0.7));
    }

    25% {
        transform: translateX(-4px) skewX(2deg);
        filter:
            drop-shadow(-5px 0 0 rgba(234, 67, 53, 0.9)) drop-shadow(5px 0 0 rgba(66, 133, 244, 0.3));
    }

    50% {
        transform: translateX(2px) skewX(-1deg);
        filter:
            drop-shadow(-2px 0 0 rgba(234, 67, 53, 0.4)) drop-shadow(4px 0 0 rgba(66, 133, 244, 0.8));
    }

    75% {
        transform: translateX(-2px) skewX(1deg);
        filter:
            drop-shadow(-4px 0 0 rgba(234, 67, 53, 0.6)) drop-shadow(3px 0 0 rgba(66, 133, 244, 0.6));
    }

    100% {
        transform: translateX(0) skewX(0deg);
        filter:
            drop-shadow(-3px 0 0 rgba(234, 67, 53, 0.7)) drop-shadow(3px 0 0 rgba(66, 133, 244, 0.7));
    }
}

/* ========== KERNEL - Lumière Divine ========== */
.character-slot.combat-aura-kernel {
    position: relative;
}

/* Halo intérieur sacré */
.character-slot.combat-aura-kernel::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 220%;
    height: 220%;
    transform: translate(-50%, -50%);
    background: radial-gradient(ellipse at center,
            rgba(255, 255, 255, 0.9) 0%,
            rgba(255, 245, 200, 0.6) 20%,
            rgba(255, 215, 0, 0.4) 40%,
            rgba(255, 200, 100, 0.2) 60%,
            transparent 80%);
    z-index: -1;
    pointer-events: none;
    animation: combatAuraKernelInner 2.5s ease-in-out infinite;
}

/* Rayons divins extérieurs */
.character-slot.combat-aura-kernel::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 280%;
    height: 280%;
    transform: translate(-50%, -50%);
    background:
        conic-gradient(from 0deg,
            transparent 0deg,
            rgba(255, 255, 255, 0.4) 10deg,
            transparent 20deg,
            transparent 30deg,
            rgba(255, 215, 0, 0.3) 40deg,
            transparent 50deg,
            transparent 60deg,
            rgba(255, 255, 255, 0.5) 70deg,
            transparent 80deg,
            transparent 90deg,
            rgba(255, 245, 200, 0.3) 100deg,
            transparent 110deg,
            transparent 120deg,
            rgba(255, 255, 255, 0.4) 130deg,
            transparent 140deg,
            transparent 150deg,
            rgba(255, 215, 0, 0.4) 160deg,
            transparent 170deg,
            transparent 180deg,
            rgba(255, 255, 255, 0.3) 190deg,
            transparent 200deg,
            transparent 210deg,
            rgba(255, 245, 200, 0.4) 220deg,
            transparent 230deg,
            transparent 240deg,
            rgba(255, 255, 255, 0.5) 250deg,
            transparent 260deg,
            transparent 270deg,
            rgba(255, 215, 0, 0.3) 280deg,
            transparent 290deg,
            transparent 300deg,
            rgba(255, 255, 255, 0.4) 310deg,
            transparent 320deg,
            transparent 330deg,
            rgba(255, 245, 200, 0.3) 340deg,
            transparent 350deg,
            transparent 360deg);
    z-index: -2;
    pointer-events: none;
    animation: combatAuraKernelRays 8s linear infinite;
    filter: blur(3px);
}

@keyframes combatAuraKernelInner {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.9;
        filter: brightness(1) blur(0px);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.15);
        opacity: 1;
        filter: brightness(1.4) blur(2px);
    }
}

@keyframes combatAuraKernelRays {
    0% {
        transform: translate(-50%, -50%) rotate(0deg);
    }

    100% {
        transform: translate(-50%, -50%) rotate(360deg);
    }
}

/* Sprite Kernel avec éclat divin */
.character-slot.combat-aura-kernel .character-sprite {
    filter:
        drop-shadow(0 0 20px rgba(255, 255, 255, 0.9)) drop-shadow(0 0 40px rgba(255, 215, 0, 0.7)) drop-shadow(0 0 60px rgba(255, 245, 200, 0.5)) brightness(1.2);
    animation: combatAuraKernelSprite 3s ease-in-out infinite;
}

@keyframes combatAuraKernelSprite {

    0%,
    100% {
        filter:
            drop-shadow(0 0 20px rgba(255, 255, 255, 0.9)) drop-shadow(0 0 40px rgba(255, 215, 0, 0.7)) brightness(1.2);
    }

    50% {
        filter:
            drop-shadow(0 0 35px rgba(255, 255, 255, 1)) drop-shadow(0 0 60px rgba(255, 215, 0, 0.9)) drop-shadow(0 0 80px rgba(255, 245, 200, 0.6)) brightness(1.5);
    }
}

/* Animation de particules de lumière flottantes (optionnelle) */
.character-slot.combat-aura-kernel .character-name-tag {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), rgba(255, 215, 0, 0.3));
    border-color: rgba(255, 255, 255, 0.6);
    color: #fff8dc;
    text-shadow:
        0 0 10px rgba(255, 255, 255, 1),
        0 0 20px rgba(255, 215, 0, 0.8);
    animation: combatAuraKernelTag 2s ease-in-out infinite;
}

@keyframes combatAuraKernelTag {

    0%,
    100% {
        text-shadow:
            0 0 10px rgba(255, 255, 255, 1),
            0 0 20px rgba(255, 215, 0, 0.8);
    }

    50% {
        text-shadow:
            0 0 15px rgba(255, 255, 255, 1),
            0 0 30px rgba(255, 215, 0, 1),
            0 0 40px rgba(255, 245, 200, 0.6);
    }
}

/* ========== Responsive pour les auras de combat ========== */
@media (prefers-reduced-motion: reduce) {

    .character-slot.combat-aura-win11,
    .character-slot.combat-aura-win11::before,
    .character-slot.combat-aura-win11::after,
    .character-slot.combat-aura-win11 .character-sprite,
    .character-slot.combat-aura-chromeos,
    .character-slot.combat-aura-chromeos::before,
    .character-slot.combat-aura-chromeos::after,
    .character-slot.combat-aura-chromeos .character-sprite,
    .character-slot.combat-aura-kernel,
    .character-slot.combat-aura-kernel::before,
    .character-slot.combat-aura-kernel::after,
    .character-slot.combat-aura-kernel .character-sprite {
        animation: none !important;
    }
}

@media (max-width: 768px) {

    .character-slot.combat-aura-win11::before,
    .character-slot.combat-aura-chromeos::before,
    .character-slot.combat-aura-kernel::before {
        width: 180%;
        height: 180%;
    }

    .character-slot.combat-aura-win11::after,
    .character-slot.combat-aura-chromeos::after {
        width: 160%;
        height: 160%;
    }

    .character-slot.combat-aura-kernel::after {
        width: 220%;
        height: 220%;
    }
}

/* ============================================
   HIDDEN CHOICE NOTIFICATIONS - Choix invisibles
   ============================================ */

.hidden-choice-notification {
    position: fixed;
    top: 20%;
    left: 50%;
    transform: translateX(-50%) translateY(-20px);
    z-index: 9999;
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 2rem;
    background: linear-gradient(135deg, rgba(20, 20, 40, 0.95), rgba(40, 20, 60, 0.95));
    border: 1px solid rgba(138, 43, 226, 0.5);
    border-radius: 12px;
    box-shadow:
        0 10px 40px rgba(0, 0, 0, 0.6),
        0 0 30px rgba(138, 43, 226, 0.3),
        inset 0 0 20px rgba(138, 43, 226, 0.1);
    backdrop-filter: blur(10px);
    opacity: 0;
    visibility: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.hidden-choice-notification.visible {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
}

.hidden-choice-icon {
    font-size: 1.8rem;
    animation: hiddenChoiceIconPulse 1s ease-in-out infinite;
}

@keyframes hiddenChoiceIconPulse {

    0%,
    100% {
        transform: scale(1);
        filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.5));
    }

    50% {
        transform: scale(1.15);
        filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.8));
    }
}

.hidden-choice-text {
    font-family: 'Orbitron', sans-serif;
    font-size: 1rem;
    background: linear-gradient(90deg, #a855f7, #06b6d4, #a855f7);
    background-size: 200% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: hiddenChoiceTextShimmer 2s linear infinite;
    letter-spacing: 0.05em;
}

@keyframes hiddenChoiceTextShimmer {
    0% {
        background-position: 200% center;
    }

    100% {
        background-position: -200% center;
    }
}

/* Effet glitch subtil sur la notification */
.hidden-choice-notification::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
        repeating-linear-gradient(0deg,
            transparent,
            transparent 2px,
            rgba(138, 43, 226, 0.03) 2px,
            rgba(138, 43, 226, 0.03) 4px);
    pointer-events: none;
    border-radius: 12px;
    animation: hiddenChoiceScanlines 0.1s steps(2) infinite;
}

@keyframes hiddenChoiceScanlines {
    0% {
        background-position: 0 0;
    }

    100% {
        background-position: 0 4px;
    }
}

/* Bordure animée */
.hidden-choice-notification::after {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg,
            rgba(138, 43, 226, 0.5) 0%,
            rgba(6, 182, 212, 0.5) 50%,
            rgba(138, 43, 226, 0.5) 100%);
    border-radius: 14px;
    z-index: -1;
    opacity: 0;
    animation: hiddenChoiceBorderGlow 0.5s ease-out forwards;
}

.hidden-choice-notification.visible::after {
    opacity: 1;
}

@keyframes hiddenChoiceBorderGlow {
    0% {
        opacity: 0;
        filter: blur(5px);
    }

    50% {
        opacity: 1;
        filter: blur(10px);
    }

    100% {
        opacity: 0.6;
        filter: blur(3px);
    }
}

/* Responsive */
@media (max-width: 768px) {
    .hidden-choice-notification {
        padding: 0.8rem 1.5rem;
        gap: 0.75rem;
    }

    .hidden-choice-icon {
        font-size: 1.4rem;
    }

    .hidden-choice-text {
        font-size: 0.85rem;
    }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {

    .hidden-choice-notification,
    .hidden-choice-icon,
    .hidden-choice-text,
    .hidden-choice-notification::before,
    .hidden-choice-notification::after {
        animation: none !important;
    }
}

/* ============================================
   TIMELINE INTERACTIVE - Styles
   ============================================ */

.timeline-modal {
    position: fixed;
    inset: 0;
    z-index: 1300;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.timeline-modal.open {
    opacity: 1;
    visibility: visible;
}

.timeline-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(12px);
}

.timeline-container {
    position: relative;
    z-index: 1;
    width: min(900px, 92vw);
    max-height: 85vh;
    padding: 2rem;
    background: linear-gradient(145deg, rgba(12, 20, 45, 0.98), rgba(8, 12, 28, 0.99));
    border: 1px solid rgba(0, 212, 255, 0.15);
    border-radius: 24px;
    box-shadow:
        0 30px 70px rgba(0, 0, 0, 0.7),
        0 0 60px rgba(0, 212, 255, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    transform: translateY(30px) scale(0.95);
    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.timeline-modal.open .timeline-container {
    transform: translateY(0) scale(1);
}

.timeline-close-btn {
    position: absolute;
    top: 16px;
    right: 16px;
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.08);
    color: var(--text-secondary);
    font-size: 1.4rem;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
}

.timeline-close-btn:hover {
    background: rgba(255, 71, 87, 0.3);
    color: #ff4757;
    transform: rotate(90deg);
}

.timeline-title {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(1.5rem, 3vw, 2.2rem);
    text-align: center;
    margin-bottom: 0.4rem;
    background: linear-gradient(135deg, #00d4ff, #7c3aed, #ff6b9d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 0 40px rgba(0, 212, 255, 0.3);
}

.timeline-subtitle {
    text-align: center;
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-bottom: 1.5rem;
}

.timeline-content {
    flex: 1;
    overflow-y: auto;
    padding-right: 0.5rem;
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 212, 255, 0.3) transparent;
}

.timeline-content::-webkit-scrollbar {
    width: 6px;
}

.timeline-content::-webkit-scrollbar-track {
    background: transparent;
}

.timeline-content::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, rgba(0, 212, 255, 0.4), rgba(124, 58, 237, 0.4));
    border-radius: 3px;
}

/* Arc Container */
.timeline-arc {
    margin-bottom: 1.5rem;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 16px;
    overflow: hidden;
    transition: border-color 0.3s ease;
}

.timeline-arc:hover {
    border-color: rgba(0, 212, 255, 0.2);
}

.arc-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.2rem 1.5rem;
    background: linear-gradient(90deg, rgba(0, 212, 255, 0.05), transparent);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.arc-icon {
    font-size: 2rem;
    filter: drop-shadow(0 0 10px currentColor);
}

.arc-info {
    flex: 1;
}

.arc-name {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.15rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.15rem;
}

.arc-desc {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.arc-progress {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.85rem;
    padding: 0.4rem 0.8rem;
    background: rgba(0, 212, 255, 0.1);
    border: 1px solid rgba(0, 212, 255, 0.2);
    border-radius: 20px;
    color: var(--primary-color);
}

/* Chapters */
.arc-chapters {
    padding: 0.8rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.timeline-chapter {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.9rem 1.1rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.25s ease;
}

.timeline-chapter:hover:not(.locked) {
    background: rgba(0, 212, 255, 0.08);
    border-color: rgba(0, 212, 255, 0.3);
    transform: translateX(6px);
    box-shadow: 0 5px 20px rgba(0, 212, 255, 0.15);
}

.timeline-chapter.locked {
    opacity: 0.45;
    cursor: not-allowed;
}

.timeline-chapter.locked:hover {
    background: rgba(255, 255, 255, 0.03);
    transform: none;
}

/* Chapter Status Indicator */
.chapter-status {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    flex-shrink: 0;
    position: relative;
}

.chapter-status.completed {
    background: linear-gradient(135deg, #10b981, #34d399);
    box-shadow: 0 0 12px rgba(16, 185, 129, 0.6);
}

.chapter-status.current {
    background: linear-gradient(135deg, #00d4ff, #7c3aed);
    box-shadow: 0 0 12px rgba(0, 212, 255, 0.6);
    animation: statusPulse 1.5s ease-in-out infinite;
}

.chapter-status.available {
    background: rgba(255, 255, 255, 0.3);
    border: 2px solid rgba(255, 255, 255, 0.4);
}

.chapter-status.locked {
    background: rgba(100, 100, 100, 0.3);
    border: 2px solid rgba(100, 100, 100, 0.4);
}

.chapter-status.secret {
    background: linear-gradient(135deg, #a855f7, #ec4899);
    box-shadow: 0 0 12px rgba(168, 85, 247, 0.6);
    animation: secretGlow 2s ease-in-out infinite alternate;
}

@keyframes statusPulse {

    0%,
    100% {
        transform: scale(1);
        opacity: 1;
    }

    50% {
        transform: scale(1.15);
        opacity: 0.8;
    }
}

@keyframes secretGlow {
    0% {
        box-shadow: 0 0 8px rgba(168, 85, 247, 0.4);
    }

    100% {
        box-shadow: 0 0 20px rgba(236, 72, 153, 0.6);
    }
}

/* Chapter Info */
.chapter-info {
    flex: 1;
    min-width: 0;
}

.chapter-name {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.15rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.chapter-details {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* Event Markers Container */
.chapter-markers {
    display: flex;
    gap: 0.4rem;
    flex-shrink: 0;
}

.chapter-events {
    display: flex;
    gap: 0.2rem;
}

.event-icon {
    font-size: 1.1rem;
    cursor: help;
    transition: transform 0.2s ease;
}

.event-icon:hover {
    transform: scale(1.3);
}

/* Death Icon */
.death-icon {
    filter: drop-shadow(0 0 6px rgba(255, 71, 87, 0.7));
    animation: deathFlicker 3s ease-in-out infinite;
}

@keyframes deathFlicker {

    0%,
    90%,
    100% {
        opacity: 1;
    }

    95% {
        opacity: 0.6;
    }
}

/* Resurrection Icon */
.resurrection-icon {
    filter: drop-shadow(0 0 8px rgba(52, 211, 153, 0.8));
    animation: resurrectionPulse 2s ease-in-out infinite;
}

@keyframes resurrectionPulse {

    0%,
    100% {
        transform: scale(1) rotate(0deg);
        filter: drop-shadow(0 0 6px rgba(52, 211, 153, 0.6));
    }

    50% {
        transform: scale(1.15) rotate(180deg);
        filter: drop-shadow(0 0 12px rgba(52, 211, 153, 1));
    }
}

/* Corruption Icon */
.corruption-icon {
    filter: drop-shadow(0 0 8px rgba(139, 92, 246, 0.8));
    animation: corruptionGlitch 2.5s ease-in-out infinite;
}

@keyframes corruptionGlitch {

    0%,
    100% {
        transform: translate(0, 0);
        filter: drop-shadow(0 0 6px rgba(139, 92, 246, 0.6));
    }

    10% {
        transform: translate(-2px, 1px);
    }

    20% {
        transform: translate(2px, -1px);
        filter: drop-shadow(0 0 10px rgba(255, 0, 100, 0.8));
    }

    30% {
        transform: translate(0, 0);
    }

    50% {
        filter: drop-shadow(0 0 12px rgba(139, 92, 246, 1));
    }
}

/* Timeline Legend */
.timeline-legend {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1.2rem;
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(255, 255, 255, 0.08);
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

.legend-dot.completed {
    background: linear-gradient(135deg, #10b981, #34d399);
    box-shadow: 0 0 6px rgba(16, 185, 129, 0.5);
}

.legend-dot.current {
    background: linear-gradient(135deg, #00d4ff, #7c3aed);
    box-shadow: 0 0 6px rgba(0, 212, 255, 0.5);
}

.legend-dot.locked {
    background: rgba(100, 100, 100, 0.4);
}

.legend-dot.secret {
    background: linear-gradient(135deg, #a855f7, #ec4899);
    box-shadow: 0 0 6px rgba(168, 85, 247, 0.5);
}

/* Responsive */
@media (max-width: 768px) {
    .timeline-container {
        padding: 1.5rem 1rem;
        border-radius: 18px;
    }

    .arc-header {
        padding: 1rem 1.2rem;
    }

    .arc-icon {
        font-size: 1.6rem;
    }

    .arc-name {
        font-size: 1rem;
    }

    .timeline-chapter {
        padding: 0.75rem 0.9rem;
    }

    .chapter-name {
        font-size: 0.85rem;
    }

    .timeline-legend {
        gap: 0.8rem;
    }

    .legend-item {
        font-size: 0.75rem;
    }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {

    .chapter-status.current,
    .chapter-status.secret,
    .death-icon,
    .resurrection-icon,
    .corruption-icon {
        animation: none !important;
    }

    .timeline-chapter:hover:not(.locked) {
        transform: none;
    }

    .timeline-close-btn:hover {
        transform: none;
    }
}

/* ============================================
   Animations - fadeInUp pour le menu
   ============================================ */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ============================================
   INTELLIGENT MEDIA PLAYER - BPM Indicator
   ============================================ */

/* Container BPM */
.mp-bpm-container {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    margin-top: 0.5rem;
    padding: 0.4rem 0.8rem;
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(124, 58, 237, 0.1));
    border: 1px solid rgba(0, 212, 255, 0.2);
    border-radius: 20px;
}

/* Affichage BPM */
.mp-bpm-display {
    display: flex;
    align-items: baseline;
    gap: 0.25rem;
    --bpm-pulse-duration: 500ms;
}

.mp-bpm-value {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.3rem;
    font-weight: 700;
    background: linear-gradient(90deg, #00d4ff, #7c3aed, #ff6b9d);
    background-size: 200% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: bpmPulse var(--bpm-pulse-duration) ease-in-out infinite,
        bpmGradient 3s linear infinite;
    text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
}

@keyframes bpmPulse {

    0%,
    100% {
        transform: scale(1);
        opacity: 0.9;
    }

    50% {
        transform: scale(1.1);
        opacity: 1;
    }
}

@keyframes bpmGradient {
    0% {
        background-position: 0% center;
    }

    100% {
        background-position: 200% center;
    }
}

.mp-bpm-label {
    font-family: 'Inter', sans-serif;
    font-size: 0.65rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Bouton Sync BPM */
.mp-bpm-sync-btn {
    padding: 0.3rem 0.6rem;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.65rem;
    font-weight: 600;
    color: #00d4ff;
    background: rgba(0, 212, 255, 0.15);
    border: 1px solid rgba(0, 212, 255, 0.4);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.25s ease;
    white-space: nowrap;
}

.mp-bpm-sync-btn:hover {
    background: rgba(0, 212, 255, 0.25);
    border-color: rgba(0, 212, 255, 0.6);
    box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
    transform: scale(1.05);
}

.mp-bpm-sync-btn[aria-pressed="true"] {
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.3), rgba(124, 58, 237, 0.3));
    color: #fff;
    box-shadow: 0 0 10px rgba(0, 212, 255, 0.4);
}

.mp-bpm-sync-btn[aria-pressed="false"] {
    color: var(--text-secondary);
    background: rgba(100, 100, 100, 0.2);
    border-color: rgba(100, 100, 100, 0.4);
}

/* Indicateur visuel de rythme */
.mp-bpm-display::before {
    content: '♪';
    margin-right: 0.3rem;
    font-size: 0.9rem;
    animation: bpmNote var(--bpm-pulse-duration) ease-in-out infinite;
    color: #00d4ff;
    filter: drop-shadow(0 0 5px rgba(0, 212, 255, 0.6));
}

@keyframes bpmNote {

    0%,
    100% {
        transform: translateY(0) rotate(-5deg);
        opacity: 0.7;
    }

    25% {
        transform: translateY(-3px) rotate(5deg);
        opacity: 1;
    }

    50% {
        transform: translateY(0) rotate(-5deg);
        opacity: 0.8;
    }

    75% {
        transform: translateY(-2px) rotate(3deg);
        opacity: 0.9;
    }
}

/* Responsive */
@media (max-width: 768px) {
    .mp-bpm-container {
        padding: 0.3rem 0.6rem;
        gap: 0.4rem;
    }

    .mp-bpm-value {
        font-size: 1.1rem;
    }

    .mp-bpm-sync-btn {
        font-size: 0.55rem;
        padding: 0.25rem 0.5rem;
    }

    .mp-bpm-display::before {
        font-size: 0.7rem;
    }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {

    .mp-bpm-value,
    .mp-bpm-display::before {
        animation: none !important;
    }

    .mp-bpm-sync-btn:hover {
        transform: none;
    }
}

/* ============================================
   CORRUPTION SYSTEM - Effets visuels ChromeOS
   ============================================ */

/* Variables de corruption */
body {
    --corruption-hue: 0deg;
    --corruption-intensity: 0;
}

/* ========== Niveau 1: Tremblement subtil ========== */
.corruption-level-1 {
    animation: corruptionTremble1 0.3s ease-in-out infinite;
}

.corruption-level-1 .dialogue-box {
    box-shadow:
        0 0 10px rgba(255, 0, 100, 0.1),
        inset 0 0 5px rgba(255, 0, 100, 0.05);
}

@keyframes corruptionTremble1 {

    0%,
    100% {
        transform: translate(0, 0);
    }

    25% {
        transform: translate(0.5px, 0);
    }

    50% {
        transform: translate(-0.5px, 0.5px);
    }

    75% {
        transform: translate(0.5px, -0.5px);
    }
}

/* ========== Niveau 2: Scanlines + distorsion légère ========== */
.corruption-level-2 {
    animation: corruptionTremble2 0.2s ease-in-out infinite;
}

.corruption-level-2::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(0deg,
            transparent,
            transparent 2px,
            rgba(255, 0, 100, 0.03) 2px,
            rgba(255, 0, 100, 0.03) 4px);
    pointer-events: none;
    z-index: 9998;
    animation: corruptionScanlines 0.1s steps(2) infinite;
}

.corruption-level-2 .dialogue-box {
    box-shadow:
        0 0 20px rgba(255, 0, 100, 0.2),
        inset 0 0 10px rgba(255, 0, 100, 0.1);
    border-color: rgba(255, 0, 100, 0.3);
}

@keyframes corruptionTremble2 {

    0%,
    100% {
        transform: translate(0, 0);
    }

    20% {
        transform: translate(-1px, 0.5px);
    }

    40% {
        transform: translate(1px, -0.5px);
    }

    60% {
        transform: translate(-0.5px, 1px);
    }

    80% {
        transform: translate(0.5px, -1px);
    }
}

@keyframes corruptionScanlines {
    0% {
        background-position: 0 0;
    }

    100% {
        background-position: 0 4px;
    }
}

/* ========== Niveau 3: Couleurs altérées ========== */
.corruption-level-3 {
    animation: corruptionTremble3 0.15s ease-in-out infinite;
    filter: hue-rotate(var(--corruption-hue)) saturate(1.2);
}

.corruption-level-3::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(0deg,
            transparent,
            transparent 2px,
            rgba(139, 0, 255, 0.05) 2px,
            rgba(139, 0, 255, 0.05) 4px);
    pointer-events: none;
    z-index: 9998;
    animation: corruptionScanlines 0.08s steps(3) infinite;
}

.corruption-level-3 .dialogue-box {
    box-shadow:
        0 0 30px rgba(139, 0, 255, 0.3),
        inset 0 0 15px rgba(255, 0, 100, 0.15),
        0 0 5px rgba(255, 0, 100, 0.5);
    border-color: rgba(139, 0, 255, 0.5);
    animation: corruptionBoxGlow 0.5s ease-in-out infinite alternate;
}

.corruption-level-3 #speaker-name {
    animation: corruptionTextFlicker 0.2s steps(2) infinite;
}

@keyframes corruptionTremble3 {

    0%,
    100% {
        transform: translate(0, 0) skewX(0deg);
    }

    25% {
        transform: translate(-1.5px, 1px) skewX(0.5deg);
    }

    50% {
        transform: translate(1.5px, -1px) skewX(-0.5deg);
    }

    75% {
        transform: translate(-1px, -0.5px) skewX(0.3deg);
    }
}

@keyframes corruptionBoxGlow {
    0% {
        box-shadow: 0 0 30px rgba(139, 0, 255, 0.3), inset 0 0 15px rgba(255, 0, 100, 0.15);
    }

    100% {
        box-shadow: 0 0 40px rgba(255, 0, 100, 0.4), inset 0 0 20px rgba(139, 0, 255, 0.2);
    }
}

@keyframes corruptionTextFlicker {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.8;
    }
}

/* ========== Niveau 4: Forte distorsion ========== */
.corruption-level-4 {
    animation: corruptionDistort4 0.1s ease-in-out infinite;
    filter: hue-rotate(var(--corruption-hue)) saturate(1.4) contrast(1.1);
}

.corruption-level-4::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        repeating-linear-gradient(0deg,
            transparent,
            transparent 2px,
            rgba(255, 0, 50, 0.08) 2px,
            rgba(255, 0, 50, 0.08) 4px),
        repeating-linear-gradient(90deg,
            transparent,
            transparent 100px,
            rgba(139, 0, 255, 0.05) 100px,
            rgba(139, 0, 255, 0.05) 102px);
    pointer-events: none;
    z-index: 9998;
    animation: corruptionScanlines 0.05s steps(4) infinite;
}

.corruption-level-4::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg,
            transparent 40%,
            rgba(255, 0, 100, 0.1) 50%,
            transparent 60%);
    pointer-events: none;
    z-index: 9997;
    animation: corruptionGlitchBar 2s linear infinite;
}

.corruption-level-4 .dialogue-box {
    box-shadow:
        0 0 40px rgba(255, 0, 100, 0.5),
        inset 0 0 20px rgba(139, 0, 255, 0.3),
        -3px 0 0 rgba(0, 255, 255, 0.3),
        3px 0 0 rgba(255, 0, 100, 0.3);
    border-color: rgba(255, 0, 100, 0.6);
}

.corruption-level-4 #dialogue-visual {
    animation: corruptionTextJitter 0.1s steps(2) infinite;
}

@keyframes corruptionDistort4 {

    0%,
    100% {
        transform: translate(0, 0) skewX(0deg) scale(1);
    }

    10% {
        transform: translate(-2px, 1px) skewX(1deg) scale(1.002);
    }

    20% {
        transform: translate(2px, -2px) skewX(-1deg) scale(0.998);
    }

    30% {
        transform: translate(-1px, 2px) skewX(0.5deg) scale(1.001);
    }

    40% {
        transform: translate(3px, -1px) skewX(-0.5deg) scale(0.999);
    }

    50% {
        transform: translate(-2px, -1px) skewX(0.8deg) scale(1.003);
    }

    60% {
        transform: translate(1px, 2px) skewX(-0.8deg) scale(0.997);
    }

    70% {
        transform: translate(-3px, 0) skewX(1.2deg) scale(1.002);
    }

    80% {
        transform: translate(2px, 1px) skewX(-1.2deg) scale(0.998);
    }

    90% {
        transform: translate(-1px, -2px) skewX(0.3deg) scale(1.001);
    }
}

@keyframes corruptionGlitchBar {
    0% {
        transform: translateY(-100%);
    }

    100% {
        transform: translateY(100vh);
    }
}

@keyframes corruptionTextJitter {

    0%,
    100% {
        transform: translateX(0);
        filter: none;
    }

    25% {
        transform: translateX(-2px);
        filter: blur(0.5px);
    }

    50% {
        transform: translateX(2px);
        filter: none;
    }

    75% {
        transform: translateX(-1px);
        filter: blur(0.3px);
    }
}

/* ========== Niveau 5: Chaos total ========== */
.corruption-level-5 {
    animation: corruptionChaos 0.05s steps(3) infinite;
    filter: hue-rotate(var(--corruption-hue)) saturate(1.8) contrast(1.2) brightness(1.1);
}

.corruption-level-5::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        repeating-linear-gradient(0deg,
            transparent,
            transparent 1px,
            rgba(255, 0, 50, 0.15) 1px,
            rgba(255, 0, 50, 0.15) 2px),
        repeating-linear-gradient(90deg,
            transparent,
            transparent 50px,
            rgba(139, 0, 255, 0.1) 50px,
            rgba(139, 0, 255, 0.1) 52px);
    pointer-events: none;
    z-index: 9998;
    animation: corruptionScanlinesChaos 0.03s steps(5) infinite;
}

.corruption-level-5::after {
    content: 'CORRUPTED';
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-family: 'Orbitron', monospace;
    font-size: clamp(2rem, 8vw, 5rem);
    font-weight: 900;
    color: rgba(255, 0, 100, 0.15);
    text-transform: uppercase;
    letter-spacing: 0.5em;
    pointer-events: none;
    z-index: 9997;
    animation: corruptionWatermark 0.5s steps(2) infinite;
    mix-blend-mode: overlay;
}

.corruption-level-5 .dialogue-box {
    box-shadow:
        0 0 60px rgba(255, 0, 100, 0.7),
        inset 0 0 30px rgba(139, 0, 255, 0.5),
        -5px 0 0 rgba(0, 255, 255, 0.5),
        5px 0 0 rgba(255, 0, 100, 0.5),
        0 -3px 0 rgba(255, 255, 0, 0.3),
        0 3px 0 rgba(139, 0, 255, 0.3);
    border-color: rgba(255, 0, 100, 0.8);
    animation: corruptionBoxChaos 0.1s steps(3) infinite;
}

.corruption-level-5 #speaker-name {
    animation: corruptionNameChaos 0.08s steps(4) infinite;
    text-shadow:
        -2px 0 rgba(0, 255, 255, 0.7),
        2px 0 rgba(255, 0, 100, 0.7);
}

.corruption-level-5 #dialogue-visual {
    animation: corruptionTextChaos 0.06s steps(3) infinite;
}

@keyframes corruptionChaos {
    0% {
        transform: translate(0, 0) skewX(0deg) skewY(0deg);
    }

    20% {
        transform: translate(-3px, 2px) skewX(2deg) skewY(-1deg);
    }

    40% {
        transform: translate(4px, -3px) skewX(-3deg) skewY(1deg);
    }

    60% {
        transform: translate(-2px, -2px) skewX(1deg) skewY(2deg);
    }

    80% {
        transform: translate(3px, 3px) skewX(-2deg) skewY(-2deg);
    }

    100% {
        transform: translate(-4px, 1px) skewX(3deg) skewY(0deg);
    }
}

@keyframes corruptionScanlinesChaos {
    0% {
        opacity: 1;
        background-position: 0 0;
    }

    20% {
        opacity: 0.8;
        background-position: 0 2px;
    }

    40% {
        opacity: 1;
        background-position: 0 -1px;
    }

    60% {
        opacity: 0.9;
        background-position: 0 3px;
    }

    80% {
        opacity: 1;
        background-position: 0 -2px;
    }

    100% {
        opacity: 0.85;
        background-position: 0 1px;
    }
}

@keyframes corruptionWatermark {

    0%,
    100% {
        opacity: 0.15;
        transform: translate(-50%, -50%) scale(1);
    }

    50% {
        opacity: 0.25;
        transform: translate(-50%, -50%) scale(1.02);
    }
}

@keyframes corruptionBoxChaos {

    0%,
    100% {
        transform: translateX(0);
    }

    25% {
        transform: translateX(-3px);
    }

    50% {
        transform: translateX(3px);
    }

    75% {
        transform: translateX(-1px);
    }
}

@keyframes corruptionNameChaos {

    0%,
    100% {
        transform: translateX(0);
        opacity: 1;
    }

    25% {
        transform: translateX(-4px);
        opacity: 0.8;
    }

    50% {
        transform: translateX(4px);
        opacity: 1;
    }

    75% {
        transform: translateX(-2px);
        opacity: 0.9;
    }
}

@keyframes corruptionTextChaos {

    0%,
    100% {
        transform: translate(0, 0);
        clip-path: inset(0 0 0 0);
    }

    25% {
        transform: translate(-2px, 1px);
        clip-path: inset(5% 0 0 0);
    }

    50% {
        transform: translate(2px, -1px);
        clip-path: inset(0 0 5% 0);
    }

    75% {
        transform: translate(-1px, -1px);
        clip-path: inset(0 5% 0 0);
    }
}

/* ========== Effets sur le texte ========== */
.text-glitch {
    position: relative;
    animation: textGlitchChar 0.1s steps(2) forwards;
}

@keyframes textGlitchChar {
    0% {
        opacity: 1;
        transform: translateX(0);
    }

    50% {
        opacity: 0.5;
        transform: translateX(-2px);
        color: #ff0064;
    }

    100% {
        opacity: 1;
        transform: translateX(0);
    }
}

.corruption-parasite {
    display: inline;
    color: #ff0064;
    font-family: monospace;
    animation: parasiteFlash 0.2s steps(2) forwards;
    text-shadow: 0 0 5px #ff0064;
}

@keyframes parasiteFlash {
    0% {
        opacity: 1;
        transform: scale(1.2);
    }

    50% {
        opacity: 0.8;
        color: #8b00ff;
    }

    100% {
        opacity: 0;
        transform: scale(0.8);
    }
}

/* ========== Responsive ========== */
@media (prefers-reduced-motion: reduce) {

    .corruption-level-1,
    .corruption-level-2,
    .corruption-level-3,
    .corruption-level-4,
    .corruption-level-5,
    .corruption-level-2::before,
    .corruption-level-3::before,
    .corruption-level-4::before,
    .corruption-level-4::after,
    .corruption-level-5::before,
    .corruption-level-5::after,
    .corruption-level-3 .dialogue-box,
    .corruption-level-4 .dialogue-box,
    .corruption-level-5 .dialogue-box,
    .corruption-level-3 #speaker-name,
    .corruption-level-4 #dialogue-visual,
    .corruption-level-5 #speaker-name,
    .corruption-level-5 #dialogue-visual,
    .text-glitch,
    .corruption-parasite {
        animation: none !important;
    }
}